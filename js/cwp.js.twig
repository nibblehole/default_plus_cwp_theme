function noti_bubble(title,msj,type,bar,button,timer,repeat) {
    toastr.options = {
        closeButton: button,
        progressBar: bar,
        showMethod: 'slideDown',
        preventDuplicates:repeat,
        timeOut: timer
    };
    if(type =='success'){ toastr.success(title, msj); }
    if(type =='error'){ toastr.error(title, msj); }
    if(type =='info'){ toastr.info(title, msj); }
    if(type =='warning'){ toastr.warning(title, msj); }
    validatesound();
}
function crontab_run(line,desc){
    noti_bubble('{{ langmod.CRLABEL4 }}','{{ langmod.CRLABEL6 }}','success',true,false,'3000',true);
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=crontab&acc=crontab_run",
        data:"line="+line+"&desc="+Base64.decode(desc),
        complete: function(datos){
            return false;
        }
    });
    return false;
}
function validatesound(){
    var stsound = {{ confi.SOUNDALERT }};
    if(stsound==1){
        errorsound();
    }
}
function crontab_edit(line,desc){
    $("#litab1").removeClass('active');
    $("#litab2").removeClass('active');
    $("#litab3").addClass('active');

    $("#tab-1").removeClass('active');
    $("#tab-2").removeClass('active');
    $("#tab-3").addClass('active');

    $("#command3").val(Base64.decode(desc));
    $("#btn_cancel_comm3").show();
    $("#val_hide_comm3").val(line);
    return false;
}
function addcron(sw){
    if(sw==1){
        btnporcess('off','btn-cron1','{{ langmod.CRLABEL10 }}');
        if(($("#common_options_1").val()=='')||($("#common_command_1").val()=='')){
            if($("#common_options_1").val()==''){ $("common_options_1").css("color","#ffd4d4"); }
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            btnporcess('on','btn-cron1','{{ langmod.save_change }}');
            return false;
        }else{
            $("#btn-cron1").addClass('disabled');
            $("#btn-cron1").attr('disabled',true);
            $('#ibox1').children('.ibox-content').toggleClass('sk-loading');
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            var comm=$("#common_command_1").val();
            var rcomm=comm.replace('>>','||@||');
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=crontab&acc=addcron",
                data:"common="+Base64.encode($("#common_options_1").val())+"&command="+Base64.encode(rcomm)+"&sw="+sw+"&minute_options="+Base64.encode($("#minute_options").val())+
                    "&hour_options="+Base64.encode($("#hour_options").val())+"&day_options="+Base64.encode($("#day_options").val())+"&month_options="+Base64.encode($("#month_options").val())+"&weekday_options="+Base64.encode($("#weekday_options").val())+"&command2="+Base64.encode($("#command2").val())+"&command3="+Base64.encode($("#command3").val()),
                complete: function(datos){
                    //alert(datos.responseText); return false;
                    $("#common_options_1").val('');
                    $("#common_command_1").val('');
                    noti_bubble('{{langmod.EXIST}}','{{langmod.EXISTADD}}','success',true,false,'3000',true);
                    refrescron();
                    $("#btn-cron1").removeClass('disabled');
                    $("#btn-cron1").attr('disabled',false);
                    track_errors();
                    $('#ibox1').children('.ibox-content').removeClass('sk-loading');
                    btnporcess('on','btn-cron1','{{ langmod.save_change }}');
                    return false;
                }
            });
        }
    }
    if(sw==2){
        btnporcess('off','btn-cron2','{{ langmod.CRLABEL10 }}');
        if(($("#minute_options").val()=='')||($("#hour_options").val()=='')||($("#day_options").val()=='')||($("#month_options").val()=='')||($("#weekday_options").val()=='')||($("#command2").val()=='')){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            return false;
        }else{
            $("#btn-cron2").addClass('disabled');
            $("#btn-cron2").attr('disabled',true);
            $('#ibox1').children('.ibox-content').toggleClass('sk-loading');
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=crontab&acc=addcron",
                data:"sw="+sw+"&minute_options="+Base64.encode($("#minute_options").val())+"&hour_options="+Base64.encode($("#hour_options").val())+"&day_options="+Base64.encode($("#day_options").val())+"&month_options="+Base64.encode($("#month_options").val())+"&weekday_options="+Base64.encode($("#weekday_options").val())+"&command2="+Base64.encode($("#command2").val()),
                complete: function(datos){
                    $("#minute_options").val('');
                    $("#hour_options").val('');
                    $("#day_options").val('');
                    $("#month_options").val('');
                    $("#weekday_options").val('');
                    $("#command2").val('');
                    $("#table_crons").html('');
                    noti_bubble('{{langmod.EXIST}}','{{langmod.EXISTADD}}','success',true,false,'3000',true);
                    refrescron();
                    $("#btn-cron2").removeClass('disabled');
                    $("#btn-cron2").attr('disabled',false);
                    track_errors();
                    $('#ibox1').children('.ibox-content').removeClass('sk-loading');
                    btnporcess('on','btn-cron2','{{ langmod.save_change }}');
                    return false;
                }
            });
        }
    }
    if(sw==3){
        btnporcess('off','btn-cron3','{{ langmod.CRLABEL10 }}');
        $("#btn-cron3").addClass('disabled');
        $("#btn-cron3").attr('disabled',true);
        if($("#command3").val()==''){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
            return false;
        }else{
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=crontab&acc=addcron",
                data:"sw="+sw+"&command3="+Base64.encode($("#command3").val())+"&val_hide_comm3="+Base64.encode($("#val_hide_comm3").val()),
                complete: function(datos){
                    $("#command3").val('');
                    $("#table_crons").html('');
                    noti_bubble('{{langmod.EXIST}}','{{langmod.EXISTADD}}','success',true,false,'3000',true);
                    refrescron();
                    $("#btn-cron3").removeClass('disabled');
                    $("#btn-cron3").attr('disabled',false);
                    track_errors();
                    $('#ibox1').children('.ibox-content').removeClass('sk-loading');
                    btnporcess('on','btn-cron3','{{ langmod.save_change }}');
                    return false;
                }
            });
        }
    }
}
function refrescron(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=crontab&acc=refrescron",
        complete: function(datos){
            $("#table_crons").html('');
            $("#table_crons").html(datos.responseText);
            return false;
        }
    });
    return false;
}
function crontab_delete(line,desc){
    $("#descron").html(Base64.decode(desc));
    $("#idhidencron").val(line);
    $("#myModal2").modal('toggle');
    return false;
}
function newvalidpass(pass1,pass2){
    var expreg =/^[a-zA-Z0-9\_\.\-\/]+$/i;
    var sw1=0;
    var sw2=0;
    if(pass1!=""){
        //var resp=expreg.test(pass1);
        var resp = true;
        if(resp==false){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            sw1=1;
        }else{
            sw1=3;
        }
    }
    if(pass2!=""){
        //var resp=expreg.test(pass2);
        var resp = true;
        if(resp==false){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            sw2=1;
            $("#btn-submit").hide();
        }else{
            sw2=3;
        }
    }
    if((pass1==pass2)&&(sw1 + sw2)==6) { $("#btn-submit").show(); }else{ $("#btn-submit").hide(); }
}
function newpass(){
    var pass1 =Base64.encode($("#pass1").val());
    var pass2 =Base64.encode($("#pass2").val());
    if((pass1!='')&&(pass2!='')){
        if($("#pass1").val()==$("#pass2").val()){
            $("#btn-submit").attr('disabled',true);
            $("#btn-submit").addClass('disabled');
            $("#btn-submit").html('<i class="fa fa-spinner fa-spin"></i>  {{ langene.MDBTN_SAVE }}');
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?acc=newpass",
                data:"pass1="+pass1+"&pass2="+pass2+"&user={{users}}",
                complete: function(datos){
                    if(datos.responseText==0){
                        $("#btn-submit").attr('disabled',false);
                        $("#btn-submit").removeClass('disabled');
                        $("#btn-submit").html('{{ langene.MDBTN_SAVE }}');

                        $("#modal-changepass").modal('toggle');
                        $("#pass1").val('');
                        $("#pass2").val('');
                    }else{
                        window.location.href="/login/?acc=logon";
                    }
                    return false;
                }
            });
        }else{
            noti_bubble('{{langmod.EMERROR}}','{{langmod.EMERROR14}}','error',true,false,'3000',true);
        }
    }else{
        noti_bubble('{{langmod.EMERROR}}','{{langmod.EMERROR14}}','error',true,false,'3000',true);
    }
    return false;
}
function processlist(sw){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=mod_process_list",
        complete: function(datos){
            $("#contentmodalpl").html(datos.responseText);
            if(sw==1){
                timer = setTimeout('processlist(1)', 4000);
            }else{
                return false;
            }
        }
    });
}
function disablephpini(st,id){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpini_editor&acc=disablephpini",
        data:"id="+id+"&file="+$("#hfilename").val(),
        complete: function(datos){
            //$("#conteditphp").html(datos.responseText);
            listregphpini();
            return false;
        }
    });
}
function deletephpini(st,id,name){
    if(st==0){
        var varheader='<h2>{{ langmod.PHPLABEL6 }}</h2>';
        var varbody='<p class="text-center"><b>{{ langmod.ALERTDELETE }}  '+name+' ?</b></p>';
        var varfooter='<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.BTN_NO}}</button>  <button type="button" class="btn btn-primary" onclick="return deletephpini(1,\''+id+'\',\''+name+'\')">{{langmod.BTN_YES}}</button>';
        $("#deletemodal .modal-header").html(varheader);
        $("#deletemodal .modal-body").html(varbody);
        $("#deletemodal .modal-footer").html(varfooter);
        $("#deletemodal").modal('toggle');
        //var msj='<div class="alert alert-warning fade in"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button><i class="glyphicon glyphicon-ban-circle alert-icon "></i> {{langmod.ALERTDELETE}}  '+name+'?  <strong><a href="#" onclick="return deletephpini(1,\''+id+'\',\''+name+'\')"> {{langmod.BTN_YES}}</a>  <a href="#" data-dismiss="alert" aria-hidden="true"></strong> {{langmod.BTN_NO}}</strong></a></div>';
        //$('#erroreditphp').html(msj);
        //$('#erroreditphp').show('blind');
    }else if(st==1){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=phpini_editor&acc=deletephpini",
            data:"id="+id+"&file="+$("#hfilename").val(),
            complete: function(datos){
                listregphpini();
                $("#deletemodal").modal('hide');
                return false;
            }
        });
    }
    return false;
}
function changstpublic(st,sw){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=files_system_lock&acc=changstpublic",
        data:"st="+st,
        complete: function(datos){
            if(datos.responseText==1){
                $("#imglock").removeClass('label-success');
                $("#imglock").addClass('label-warning');
                $("#imglock").html('{{langene.FSL_UNLOCKED}}');
                $("#alertfl").hide('blind');
                $("#contfl").html('<a class="btn btn-success btn-rounded btn-block" href="#" onclick="return changstpublic(0,1)"><i class="fa fa-unlock-alt"></i> {{langene.FSL_BTN_UNLOCKED}}</a>');
            }else if(datos.responseText==0) {
                $("#imglock").removeClass('label-warning');
                $("#imglock").addClass('label-success');
                $("#imglock").html('{{langene.FSL_LOCKED}}');
                $("#alertfl").show('blind');
                $("#contfl").html('<a class="btn btn-warning btn-rounded btn-block" href="#" onclick="return changstpublic(1,1)"><i class="fa fa-lock"></i> {{langene.FSL_BTN_LOCKED}}</a>');
            }
        }
    });
}
function settingmanual(user,domain){
    //alert(user);
    $("#userftp").html(user);
    $("#serverftp").html(domain);
    $("#aftpfilezilla").prop("href", "?module=ftp_accounts&acc=xmlfilezilla&client=filezilla&userftp="+user+"&domain="+domain);
    $("#aftptransmit").prop("href", "?module=ftp_accounts&acc=xmlfilezilla&client=transmit&userftp="+user+"&domain="+domain);
    $("#aftpcyberduck").prop("href", "?module=ftp_accounts&acc=xmlfilezilla&client=cyberduck&userftp="+user+"&domain="+domain);
    return false;
}
function changepassftp(user){
    $("#pass1ftp").val('');
    $("#pass2ftp").val('');
    $("#changepassftptitle").html('{{langene.MDCHANPASS}}  '+user);
    $("#modal-changepassftp").modal('toggle');
    $("#hidenuserftp").val(user);
    return false;
}
function ftprefres(user,domain){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=ftp_accounts&acc=ftprefres",
        data:"user="+user+"&domain="+domain,
        complete: function(datos){
            $("#contftp").html('');
            $("#contftp").html(datos.responseText);
            return false;
        }
    });
}
function newvalidpassftp(pass1,pass2){
    var expreg =/^[a-zA-Z0-9\_\.\-\/]+$/i;
    var sw1=0;
    var sw2=0;
    if(pass1!=""){
        var resp=expreg.test(pass1);
        if(resp==false){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            sw1=1;
        }else{
            sw1=3;
        }
    }
    if(pass2!=""){
        var resp=expreg.test(pass2);
        if(resp==false){
            noti_bubble('{{langmod.ERROR1}}','{{langmod.ERROR2}}','error',true,false,'3000',true);
            sw2=1;
            $("#btn-submitftp").hide();
        }else{
            sw2=3;
        }
    }
    if((pass1==pass2)&&(sw1 + sw2)==6) {
        $("#btn-submitftp").show();
    }else{
        $("#btn-submitftp").hide();
    }

}
function ftpdelete(st,user,domain,deluser) {
    if(st==0){
        var btsfooter='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.FTPNO }}</button>\n' +'<button type="button" class="btn btn-primary" id="btnyesdel" onclick="return ftpdelete(1,\''+user+'\',\''+domain+'\',\''+deluser+'\')">{{ langmod.FTPYES }}</button>';
        var btsheader='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.FTPLABEL2 }}</span></button><h4 class="modal-title">{{ langmod.FTPLABEL3 }}</h4><small class="font-bold">You are about to eliminate the next task, are you sure you want to do it?</small>';
        $("#deletemodal .modal-footer").html(btsfooter);
        $("#deletemodal .modal-header").html(btsheader);
        $("#deletemodal .modal-body").html('<p class="text-center"><strong id="descron">'+user+'</strong></p>');
        $("#deletemodal").modal('toggle');
        return false
     }
     if(st==1){
         btnporcess('off','btnyesdel','{{ langmod.FTPLABEL6 }}');
         $("#btnyesdel").attr('disabled',true);
         $("#btnyesdel").addClass('disabled');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=ftp_accounts&acc=ftpdelete",
            data:"user="+user+"&domain="+domain+"&deluser"+deluser,
            complete: function(datos){
                ftprefres(user,domain);
                refrespanelnew('ftp_accounts');
                noti_bubble('{{langmod.FTPDELETEUSER}}','{{langmod.FTPDELETE}}','success',true,false,'3000',true);
                btnporcess('on','btnyesdel','{{ langmod.FTPYES }}');
                $("#deletemodal").modal('hide');
                return false;
            }
        });
    }
    return false;
}
function save_lang(){
    var lang=$('input:radio[name=lang]:checked').val();
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=save_lang",
        data:"lang="+lang,
        complete: function(datos){
            //alert(datos.responseText);
            window.location.href=datos.responseText;
            return false;
        }
    });
    return false;
}
function changerrandom(inputdiv){
    var long=$("#lengthpass").val();
    var typepass=$("#typepass").val();
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=ftp_accounts&acc=changerrandom&long="+long+"&typepass="+typepass,
        complete: function(datos){
            $("#"+inputdiv).val(datos.responseText);
            return false;
        }
    });
    return false;
}
function refrespanelnew(module){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=refrespanel",
        data: "module="+module,
        complete: function(datos){
            if(module=='mysql_manager'){
                //alert(datos.responseText);
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var sw=trozo[2];
                var porc=((100/package)*used);
                porc=Math.round(porc);

                $("#tlmysqlind").html('{{langene.PGMYSQL}} '+used+'/'+package);
                $("#indmysql .stat-percent").html(porc+'%');
                $("#barmysqlind").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#barmysqlind").removeClass('progress-bar-success');
                $("#barmysqlind").removeClass('progress-bar-warning');
                $("#barmysqlind").removeClass('progress-bar-danger');
                if(porc >25){
                    $("#barmysqlind").addClass(newclass);
                }
            }
            if(module=='ftp_accounts'){
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var porc=parseInt(((100/package)*used));

                $("#tlftpind").html('{{langene.PGFTP}} '+used+'/'+package);
                $("#indftp .stat-percent").html(porc+'%');
                $("#barftpind").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#barftpind").removeClass('progress-bar-success');
                $("#barftpind").removeClass('progress-bar-warning');
                $("#barftpind").removeClass('progress-bar-danger');
                if(porc >25){
                    $("#barftpind").addClass(newclass);
                }
            }
            if(module=='domains'){
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var porc=parseInt(((100/package)*used));
                if(Math.round(used) < Math.round(package)){$("#divbtnadd").html('<button type="button" id="btn_add_domain" onclick="return btnadddomain()" class="btn btn-success btn-xs mr5 mb10"> {{langmod.DBNTADD}}</button>');}else{$("#divbtnadd").html('');}
                $("#tldomind").html('{{langene.PGDOMAINS}} '+used+'/'+package);
                $("#inddom .stat-percent").html(porc+'%');
                $("#bardomindpor").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#bardomind").removeClass('progress-bar-success');
                $("#bardomind").removeClass('progress-bar-warning');
                $("#bardomind").removeClass('progress-bar-danger');
                if(porc >25){
                    $("#bardomind").addClass(newclass);
                }
            }
            if(module=='email_accounts'){
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var sw=trozo[2];
                var porc=((100/package)*used);
                porc=Math.round(porc);

                if(Math.round(used) < Math.round(package)){$("#divbtnadd").show();}else{$("#divbtnadd").hide();}
                $("#tlftpind").html('{{langene.PGEMAIL}} '+used+' / '+package);
                $("#indemail .stat-percent").html(porc+'%');
                $("#baremailind").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#baremailind").removeClass('progress-bar-success');
                $("#baremailind").removeClass('progress-bar-warning');
                $("#baremailind").removeClass('progress-bar-danger');
                if(porc >25) {
                    $("#baremailind").addClass(newclass);
                }
            }
            if(module=='subdomains'){
                //alert(datos.responseText);
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0].trim();
                var used=trozo[1].trim();
                var porc=parseInt(((100/package)*used));
                //alert(used+' - '+package);
                if(Math.round(used) < Math.round(package)){$("#divbtnadd").html('<button type="button" id="btn_add_subdomain" class="btn btn-success btn-xs mr5 mb10" onclick="return btnaddsubdomain()"> {{langmod.SDBNTADD}}</button>');}else{$("#divbtnadd").html('');}
                $("#tldomind").html('{{langene.SUBDOMAIN}} '+used+'/'+package);
                $("#inddom .stat-percent").html(porc+'%');
                //$("#bardomindpor").attr('width',porc+'%');
                $("#bardomindpor").css('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#bardomind").removeClass('progress-bar-success');
                $("#bardomind").removeClass('progress-bar-warning');
                $("#bardomind").removeClass('progress-bar-danger');
                if(porc >25){
                    $("#bardomind").addClass(newclass);
                }
            }
            if(module=='email_forwarders'){
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var sw=trozo[2];
                var porc=((100/package)*used);
                porc=Math.round(porc);
                $("#tlforwind").html('{{langmod.PGFORWA}} '+used+' / '+package);
                if(Math.round(used) < Math.round(package)){
                    $("#forwbtnadd").show();
                }else{
                    $("#forwbtnadd").hide();
                }
                $("#indforw .stat-percent").html(porc+'%');
                $("#barforwind").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#barforwind").removeClass('progress-bar-success');
                $("#barforwind").removeClass('progress-bar-warning');
                $("#barforwind").removeClass('progress-bar-danger');
                if(porc >25) {
                    $("#barforwind").addClass(newclass);
                }
            }
            if(module=='mail_autoreply'){
                var string=datos.responseText;
                var trozo=string.split('||');
                var package=trozo[0];
                var used=trozo[1];
                var sw=trozo[2];
                var porc=((100/package)*used);
                porc=Math.round(porc);
                $("#tlftpind").html('{{langmod.EARESPONDER}} '+used+' / '+package);
                if(Math.round(package) > Math.round(used)){
                    $("#btn-addautof").show();
                }
                if(Math.round(package) <= Math.round(used)){
                    $("#btn-addautof").hide();
                }
                $("#indemail .stat-percent").html(porc+'%');
                $("#baremailind").attr('width',porc+'%');

                if(porc <= 25){ var newclass='progress-bar';}
                if((porc >= 26) && (porc <= 50)){ var newclass='progress-bar-success';}
                if((porc >= 51) && (porc <= 75)){ var newclass='progress-bar-warning';}
                if(porc > 75){ var newclass='progress-bar-danger'; }
                $("#baremailind").removeClass('progress-bar-success');
                $("#baremailind").removeClass('progress-bar-warning');
                $("#baremailind").removeClass('progress-bar-danger');
                if(porc >25) {
                    $("#baremailind").addClass(newclass);
                }
            }
            return false;
        }
    });
}
function deletedp(array,usr,name,st){
    if(st==0){
        //var msj='<div class="alert alert-warning fade in"><i class="glyphicon glyphicon-warning-sign alert-icon "></i>{{langmod.MSJDELETE}} <strong>'+name+'  <a href="#" onclick="return deletedp('+array+',\''+usr+'\',\''+name+'\',1)">{{langmod.DPYES}}</a></strong> / <strong><a href="#">{{langmod.DPNOT}}</a></strong></div>';
        var msj='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.PDIRLABEL2 }}</span></button><h4 class="modal-title">{{langmod.PDIRLABEL1}}</h4>  <small class="font-bold"> {{langmod.MSJDELETE}} </small>';
        var btns=' <button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.CANCE }}</button>\n' +'<button type="button" class="btn btn-primary" onclick="resturn deletedp('+array+',\''+usr+'\',\''+name+'\',1)">{{ langmod.DPYES }}</button>';
        $("#deletemodal .modal-header").html(msj);
        $("#deletemodal .modal-body").html('<p class="text-center"><strong>'+name+'</strong></p>');
        $("#deletemodal .modal-footer").html(btns);
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=protected_directory&acc=deletedp",
            data:"array="+array+"&usr="+usr,
            complete: function(datos){
                $("#deletemodal").modal('hide');
                $("#deletemodal .modal-header").html('');
                $("#deletemodal .modal-body").html('');
                $("#deletemodal .modal-footer").html('');
                updatetable();
                return false;
            }
        });
    }
}
function updatetable(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=protected_directory&acc=updatetable",
        complete: function(datos){
            $("#tablebody").html(datos.responseText);
            return false;
        }
    });
    return false;
}
function newdirprotec(){
    $("#divbtn-add").hide();
    $("#divaddform").show('blind');
    return false;
}
function updatetabledp(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=protected_directory&acc=updatetable",
        complete: function(datos){
            $("#tablebodydp").html(datos.responseText);
            return false;
        }
    });
    return false;
}
function changeradio(sw){
    if(sw==0){
        $("#exploret").hide();
        $("#manual").show('blind');
    }
    if(sw==1){
        $("#manual").hide();
        $("#exploret").show('blind');
    }
}
function searchdir(path){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=protected_directory&acc=searchdir",
        data:"path="+path,
        complete: function(datos){
            var newpath=path.replace("/../", "/");
            var trozo=datos.responseText.split('|@|');
            var str = trozo[0];
            $("#divconte").html(str);
            $("#pathview").html(trozo[1]);
            $("#hiddenvalue").val(trozo[1]);
            return false;
        }
    });
    return false;
}
function savedp(){
    $("#alert1").hide();
    var swerror=0;
    var radio=$('input:radio[name=radio1]:checked').val();
    if(radio==0){ var ruta=$("#path1").val(); }else{ var ruta=$("#hiddenvalue").val(); }
    if(ruta==''){ swerror=1;}

    if($("#namedp").val()==''){ swerror=1;}
    if($("#useradd").val()==''){ swerror=1;}
    if($("#pass1dp").val()==''){ swerror=1;}
    if($("#pass2dp").val()==''){ swerror=1;}
    if($("#pass1dp").val()!=$("#pass2dp").val()){swerror=2;}

    if(swerror==0){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=protected_directory&acc=createdp",
            data:"useradd="+$("#useradd").val()+"&dirp="+ruta+"&pass="+$("#pass1dp").val()+"&name="+$("#namedp").val(),
            complete: function(datos){
                updatetabledp();
                cancel();
                return false;
            }
        });
    }else if(swerror==1){
        noti_bubble('{{langmod.ALLREQ}}','{{langmod.PDIRLABEL3}}','error',true,false,'3000',true);
        return false;
    }else if(swerror==2){
        noti_bubble('{{langmod.PASSERROR}}','{{langmod.PDIRLABEL3}}','error',true,false,'3000',true);
        return false;
    }
    return false;
}
function cancel() {
    $("#alert").hide();
    $("#alert1").hide();
    $("#divaddform").hide('blind');
    $("#divbtn-add").show();
    return false;
}
function canceladd(){
    $("#addmodal").modal('hide');
}
function newdomainkeyup(){
    var expreg = /^[a-zA-Z0-9]+([(\.|\/|\-)]?[a-zA-Z0-9_]+)*$/i;
    var resp=expreg.test($("#newdomain").val());
    if(resp==false){
        noti_bubble('{{langmod.ERRORFORM}}','{{langmod.DERROR}}','error',false,false,'3000',true);
        //$("#btn_save_domain").hide();
        $("#btn_save_domain").addClass('disabled');
        $("#btn_save_domain").attr('disabled',true);
    }else{
        //$("#btn_save_domain").show();
        //$("#alertftp").hide('blind');
        //$("#alertftp").html('');
        //$("#btn_save_domain").show();
        $("#btn_save_domain").removeClass('disabled');
        $("#btn_save_domain").attr('disabled',false);
        var path='/public_html/';
        var newpath=$("#newdomain").val();
        $("#pathdomain").val(path+newpath);
    }
};
function btn_save_domain(){
    btnporcess('off','btn_save_domain','{{ langmod.DONLABEL10 }}');
    if($("#newdomain").val()=='' || $("#pathdomain").val()==''){
        noti_bubble('{{langmod.DDATEALL}}','{{langmod.DERROR}}','error',false,false,'3000',true);
        btnporcess('on','btn_save_domain','{{ langmod.DBNTADD }}');
        return false;
    }else{
        if ($('#autossl').prop('checked')){ var autossl=1; } else{ var autossl=0; }
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=domains&acc=btn_save_domain",
            data: "newdomain="+$("#newdomain").val()+"&pathdomain="+$("#pathdomain").val()+"&autossl="+autossl,
            complete: function(datos){
                //alert(datos.responseText);
                if(datos.responseText!='OK'){
                    noti_bubble(datos.responseText,'{{langmod.DERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn_save_domain','{{ langmod.DBNTADD }}');
                }else{
                    $("#newdomain").val('');
                    $("#pathdomain").val('/public_html/');
                    domainrefres();
                    refrespanelnew('domains');
                    noti_bubble('{{langmod.DDOMAINEXIT}}','{{langmod.DSUCCT}}','success',false,false,'3000',true);
                    btnporcess('on','btn_save_domain','{{ langmod.DBNTADD }}');
                    canceladd();
                }
                return false;
            }
        });
    }
}
function domainrefres(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=domains&acc=domainrefres",
        complete: function(datos){
            $('.dataTables-example').DataTable().destroy();
            $("#contenttr").html(datos.responseText);
            $('.dataTables-example').DataTable();
            return false;
        }
    });
}
function domaindelete(st,domain){
    $("#id2divdomain").hide();
    btnporcess('off','btnyesdel','{{ langmod.DONLABEL10 }}');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=domains&acc=verifsubdomain",
        data:"domain="+domain,
        complete: function(datos){
            if(datos.responseText==0){
                if(st==0){
                    var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.DOMLABEL3 }}</span></button><h4 class="modal-title">{{ langmod.DOMLABEL6 }}</h4><small class="font-bold">{{langmod.DDLETEDOMAIN}}</small>';
                    var strbody = '<p class="text-center">'+domain+'</p>';
                    var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.DCANDELDOMAIN }}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return domaindelete(1,\''+domain+'\')">{{langmod.DYES}}</button>';
                    $("#deletemodal .modal-footer").html(strfooter);
                    $("#deletemodal .modal-body").html(strbody);
                    $("#deletemodal .modal-header").html(strheader);
                    btnporcess('on','btnyesdel','{{ langmod.DYES }}');
                    $("#deletemodal").modal('toggle');
                    return false;
                }else if(st==1){
                    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
                    $.ajax({
                        type: "POST",
                        url: "./{{users}}/index.php?module=domains&acc=domaindelete",
                        data:"domain="+domain,
                        complete: function(datos){
                            domainrefres();
                            refrespanelnew('domains');
                            noti_bubble('{{langmod.DSUCCT}}','{{langmod.DDELDOMAINALERT}}','success',false,false,'3000',true);
                            btnporcess('on','btnyesdel','{{ langmod.DYES }}');
                            $("#deletemodal").modal('hide');
                            return false;
                        }
                    });
                }
                return false;
            }else{
                noti_bubble('{{langmod.DDELDOMAINALERTSUB}}','','error',false,false,'3000',true);
                btnporcess('on','btnyesdel','{{ langmod.DYES }}');
                return false;
            }
            return false;
        }
    });
}
function subdomaindelete(st,domain,subdomin){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SUBDOMLABEL3 }}</span></button><h4 class="modal-title">{{ langmod.SUBDOMLABEL6 }}</h4><small class="font-bold">{{langmod.SDDLETEDOMAIN}}</small>';
        var strbody = '<p class="text-center">'+subdomin+'.'+domain+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.SDNO }}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return subdomaindelete(1,\''+domain+'\',\''+subdomin+'\')">{{langmod.SDYES}}</button>';

        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal").modal('toggle');
        return false;
    }else if(st==1){
        btnporcess('off','btnyesdel','{{ langmod.SUBDOMLABEL10 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=subdomains&acc=subdomaindelete",
            data:"domain="+domain+"&subdomain="+subdomin,
            complete: function(datos){
                $("#trdomain"+datos.responseText).hide();
                //uploadpackage('subdomains');
                subdomainrefres();
                refrespanelnew('subdomains');
                noti_bubble('{{langmod.SDDELDOMAINALERT}}','{{langmod.SDSUCCT}}','success',false,false,'3000',true);
                btnporcess('on','btnyesdel','{{ langmod.SDYES }}');
                $("#deletemodal").modal('hide');
                return false;
            }
        });
    }
    return false;
}
function infomodal(domain,st){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=letsencrypt&acc=infomodal",
        data:"domain="+domain+"&st="+st,
        complete: function(datos){
            $("#modalinfo .modal-body").html(datos.responseText);
            $("#modalinfo").modal('toggle');
            return false;
        }
    });
}
function btnporcess(sw,id,text){
    if(sw=='off'){
        $("#"+id).html('<i class="fa fa-spinner fa-spin"></i>   '+text);
        $("#"+id).addClass('disabled');
        $("#"+id).attr('disabled',true);
    }
    if(sw=='on'){
        $("#"+id).html(text);
        $("#"+id).removeClass('disabled');
        $("#"+id).attr('disabled',false);
    }
}
function btn_save_subdomain(){
    btnporcess('off','btnsavesubdomain','{{ langmod.SUBDOMLABEL10 }}');
    if($("#subdomain").val()=='' || $("#pathdomain").val()==''){
        noti_bubble('{{langmod.SDDATEALL}}','{{langmod.SDERROR}}','error',false,false,'3000',true);
        btnporcess('on','btnsavesubdomain','{{ langmod.SDBNTADD }}');
        return false;
    }else{
        if ($('#autossl').prop('checked')){ var autossl=1; } else{ var autossl=0; }
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=subdomains&acc=btn_save_subdomain",
            data: "domain="+$("#domains").val()+"&subdomain="+$("#subdomain").val()+"&path="+$("#pathdomain").val()+"&autossl="+autossl,
            complete: function(datos){
                //alert(datos.responseText);
                if(datos.responseText=='OK'){
                    $("#suddomain").val('');
                    $("#pathdomain").val('/public_html/');
                    subdomainrefres();
                    refrespanelnew('subdomains');
                    noti_bubble('{{langmod.SDDOMAINEXIT}}','{{langmod.SDSUCCT}}','success',false,false,'3000',true);
                    btnporcess('on','btnsavesubdomain','{{ langmod.SDBNTADD }}');
                    $("#addmodal").modal('hide');
                }else{
                    //refrespanelnew('subdomains');
                    //subdomainrefres();
                    //subdomainrefres();
                    noti_bubble(datos.responseText,'{{langmod.SDERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btnsavesubdomain','{{ langmod.SDBNTADD }}');
                }
                return false;
            }
        });
    }
}
function subdomainrefres(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=subdomains&acc=subdomainrefres",
        complete: function(datos){
            $('.dataTables-example').DataTable().destroy();
            $("#contenttr").html(datos.responseText);
            $('.dataTables-example').DataTable();
            return false;
        }
    });
}
function subdomainkeyup(){
    var domain=$("#domains").val();
    domain=domain.substr(1);
    if($("#subdomain").val()=='mail'){
        $("#btn_save_subdomain").hide('blind');
    }else{
        var expreg = /^[a-zA-Z0-9]+([(\.|\/|\-)]?[a-zA-Z0-9_]+)*$/i;
        var resp=expreg.test($("#subdomain").val());
        if(resp==false){
            noti_bubble('{{langmod.ERRORFORM}}','{{langmod.DERROR}}','error',false,false,'3000',true);
            $("#btnsavesubdomain").addClass('disabled');
            $("#btnsavesubdomain").attr('disabled',true);
        }else{
            $("#btnsavesubdomain").removeClass('disabled');
            $("#btnsavesubdomain").attr('disabled',false);
            $("#alertftp").hide('blind');
            $("#alertftp").html('');
            var path='/public_html/';
            var newpath=$("#subdomain").val();
            $("#pathdomain").val(path+newpath);
        }
    }
}
function validatevhost(){
    //btnporcess('off','btn-lets-add','{{ langmod.SSLLABEL1 }}');
    $("#btn-lets-add").attr('disabled',true);
    $("#btn-lets-add").addClass('disabled');
    $("#btn-lets-add").html('{{langmod.SSLVALID}}');
    $("#domain_lets").attr('disabled',true);
    $("#domain_lets").addClass('disabled');

    if($("#domain_lets").val()!=''){
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=letsencrypt&acc=validatevhost",
            data:"domain="+$("#domain_lets").val(),
            complete: function (datos) {
                if(datos.responseText<1){ // validado
                    $.ajax({
                        type: "POST",
                        url: "./{{users}}/index.php?module=letsencrypt&acc=validate_domaindns",
                        data:"domain="+$("#domain_lets").val(),
                        complete: function (datos) {
                            //alert(datos.responseText);
                            if(datos.responseText==1){
                                $("#btn-lets-add").html('{{langmod.LMINSTALL}}');
                                $("#btn-lets-add").attr('disabled',false);
                                $("#btn-lets-add").removeClass('disabled');
                                $("#domain_lets").attr('disabled',false);
                                $("#domain_lets").removeClass('disabled');
                                //btnporcess('off','btn-lets-add','{{ langmod.LMINSTALL }}');
                                return false;
                            }else{
                                //btnporcess('off','btn-lets-add','{{ langmod.LMINSTALL }}');
                                noti_bubble('{{langmod.SSLERRODNS}}','{{langmod.SSLVALIDATEERROR}}','error',false,false,'3000',true);
                                $("#btn-lets-add").html('{{langmod.LMINSTALL}}');
                                $("#domain_lets").attr('disabled',false);
                                $("#domain_lets").removeClass('disabled');
                                return false;
                            }
                        }
                    });
                }else{
                    noti_bubble('{{langmod.SSLVALIDATEERRORMSJ}}','{{langmod.SSLVALIDATEERROR}}','error',false,false,'3000',true);
                    $("#btn-lets-add").attr('disabled',true);
                    $("#btn-lets-add").addClass('disabled');
                    $("#domain_lets").attr('disabled',false);
                    $("#domain_lets").removeClass('disabled');
                    //btnporcess('off','btn-lets-add','{{ langmod.LMINSTALL }}');
                    return false;
                }
            }
        });
        return false;
    }

    return false;
}
function forcerenew(domain){
    $(".forcerenew").attr('disabled', true);
    $(".forcerenew").addClass('disabled');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=letsencrypt&acc=forcerenew",
        data: "domain="+domain,
        complete: function(datos){
            //alert(datos.responseText);
            var str = datos.responseText;
            var trz = str.split('||');
            if(trz[0]=='0'){
                noti_bubble('{{langmod.SSLEXIT}}','{{langmod.SSLALEROK}}','success',false,false,'3000',true);
                $(".forcerenew").attr('disabled', false);
                $(".forcerenew").removeClass('disabled');
                $("#sslbody").html(trz[1]);
                return false;
            }else{
                noti_bubble('{{langmod.SSLERRO20}}','{{langmod.SSLVALIDATEERROR}}','error',false,false,'3000',true);
                return false;
            }
        }
    });
}
function updlistssl(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=letsencrypt&acc=list",
        complete: function(datos){
            $("#sslbody").html(datos.responseText);
            return false;
        }
    });
}
function deletessl(st,domain){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SSLCLOSE }}</span></button><h4 class="modal-title">{{ langmod.LMATENC }}</h4><small class="font-bold">{{langmod.LMDELETESSL}}</small>';
        var strbody = '<p class="text-center">'+domain+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.SSLCLOSE }}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deletessl(1,\''+domain+'\')">{{langmod.LMYES}}</button>';

        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;
    }else if(st==1){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=letsencrypt&acc=delete",
            data: "domain="+domain,
            complete: function(datos){
                $("#sslbody").html(datos.responseText);
                noti_bubble('{{langmod.SSLOK}}','{{langmod.SSLALEROK}}','success',false,false,'3000',true);
                $("#deletemodal").modal('hide');
                return false;
            }
        });
        return false;
    }
}
function deletedatabase(st,db){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SSLCLOSE }}</span></button><h4 class="modal-title">{{langmod.DBWARNING}}</h4><small class="font-bold">{{langmod.DBDELEBASEDATE}}</small>';
        var strbody = '<p class="text-center">'+db+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.DBNO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deletedatabase(1,\''+db+'\')">{{langmod.DBYES}}</button>';

        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mysql_manager&acc=deletedatabase",
            data:"database="+db,
            complete: function(datos){
                noti_bubble('{{langmod.DBSUCCT}}','{{langmod.DMUMYQLDEL}}','success',false,false,'3000',true);
                refrestable();
                refrespanelnew('mysql_manager');
                $("#deletemodal").modal('hide');
                return false;
            }
        });
        return false;
    }
    return false;
}
function deleteuserdb(st, db,user,host){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SSLCLOSE }}</span></button><h4 class="modal-title">{{langmod.DBWARNING}}</h4><small class="font-bold">{{langmod.DBDELETEUSER}}</small>';
        var strbody = '<p class="text-center">'+user+' '+host+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.DBNO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deleteuserdb(1,\''+db+'\',\''+user+'\',\''+host+'\')">{{langmod.DBYES}}</button>';
        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $("#alerdelete").hide('blind');
        $("#alerdelete").html('');
        btnporcess('off','btnyesdel','{{ langmod.DBLABEL4 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mysql_manager&acc=deleteuserdb",
            data:"user="+user+"&host="+host,
            complete: function(datos){
                refrestable();
                btnporcess('on','btnyesdel','{{ langmod.DBYES }}');
                $("#deletemodal").modal('hide');
                noti_bubble('{{langmod.DBSUCCT}}','{{langmod.DMUSSQLDEL}}','success',false,false,'3000',true);
                return false;
            }
        });
        return false;
    }
    return false;
}
function changepassmysqluser(st,db,user,host){
    $('#mysqluserpass').val(user+'||'+host);
    $("#ttcgpss").html(user+' '+host);
    $("#modal-changepassusermysql").modal('toggle');
    return false;
}
function newusermysql(bd){
    $("#alerdelete").hide('blind');
    $("#titlebd").html(bd);
    $("#dbasehiden").val(bd);

    $("#modal-newusermysql").modal('toggle');
    return false;
}
function refrestable(user){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=refrestable",
        complete: function(datos){
            var str =datos.responseText;
            var trozo=str.split("|||");
            var tables=trozo[0];
            var tbusers=trozo[1];
            $('.dataTables-example').DataTable().destroy();
            $("#trtable").html(tables);
            $("#trsuser").html(tbusers);
            $('.dataTables-example').DataTable();
        }
    });
}
function optimizermysql(db){
    $("#modal-pleasewait").modal('toggle');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=optimizerdb",
        data: "db=" + db,
        complete: function (datos) {
            if(datos.responseText==''){
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBOPTIOK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
            }else{
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBERROR}}','{{langmod.DBERROR2}}','error',false,false,'3000',true);
            }
        }
    });
}
function checkmysql(db){
    $("#modal-pleasewait").modal('toggle');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=checkmysql",
        data: "db=" + db,
        complete: function (datos) {
            if(datos.responseText==''){
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBOPTIOK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
            }else{
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBERROR2}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
            }
        }
    });
}
function repairmysql(db){
    $("#modal-pleasewait").modal('toggle');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=repairmysql",
        data: "db=" + db,
        complete: function (datos) {
            if(datos.responseText==''){
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBREPAIROK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
            }else{
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBERROR2}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
            }
        }
    });
}
function dumpsql(db){
    $("#modal-pleasewait").modal('toggle');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=dumpsql",
        data: "db=" + db,
        complete: function (datos) {
            if(datos.responseText==''){
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBRDUMPOK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
            }else{
                $("#modal-pleasewait").modal('hide');
                noti_bubble('{{langmod.DBERROR2}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
            }
        }
    });
}
function searchusersmysql(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=searchusersmysql",
        data: "db="+$("#dbasehiden").val(),
        complete: function(datos){
            //alert(datos.responseText);
            $("#useusermyqlsel").html(datos.responseText);
            return false;
        }
    });
}
function changesttypephp(sw){
    if(sw=='php-fpm'){ $("#typephp").attr('checked',true);}else{$("#typephp").attr('checked',false);}
}
function modalbtnonlymysql (){
    $("#modal-onlymysql").modal('toggle');
}
function errorsound(){
    $('<audio id="chatAudio"><source src="{{url}}/sound/End_note.ogg" type="audio/ogg"><source src="{{url}}/sound/End_note.mp3" type="audio/mpeg"><source src="{{url}}/sound/End_note.wav" type="audio/wav"></audio>').appendTo('body');
    $('#chatAudio')[0].play();
}
function ediquotaemail(email,quota){
    $("#quotaemailmodal").val((quota/1024));
    $("#quotaemailtitle").html(email);
    $("#quotaemailhidde").html(email);
    $("#modal-updquotemail").modal('toggle');
    return false;
}

function updatelistemail(){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=email_accounts&acc=updatelistemail",
        complete: function (datos) {
            $("#contenttr").html(datos.responseText);
            return false;
        }
    });
    return false;

}
function emailchangepass(email){
    $("#modal-changepassemail").modal('toggle');
    $("#emailpass").val(email);
    return false;
}
function emailactive(email,st){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=email_accounts&acc=changestemail",
        data: "email=" + email+"&st="+st,
        complete: function (datos) {
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=email_accounts&acc=listemail",
                complete: function(datos){
                    $('.dataTables-example').DataTable().destroy();
                    $("#contftp").html(datos.responseText);
                    $('.dataTables-example').DataTable();
                    if(datos.responseText==5){
                        noti_bubble('{{langmod.EDESACTIVEEMAIL}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
                    }
                    if(datos.responseText==1){
                        noti_bubble('{{langmod.EACTIVEEMAIL}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
                    }
                    return false;
                }
            });
        }
    });
}
function emaildelete(st,email,tr){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.EMLABEL6 }}</span></button><h4 class="modal-title">{{langmod.EWARNING}}</h4><small class="font-bold">{{langmod.EDELETEEMAIL}}</small>';
        var strbody = '<p class="text-center">'+email+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.ENO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return emaildelete(1,\''+email+'\',\''+tr+'\')">{{langmod.EYES}}</button>';

        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;

    }
    if(st==1){
        btnporcess('off','btnyesdel','{{ langmod.EMLABEL9 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=emaildelete",
            data:"email="+email,
            complete: function(datos){
                if(datos.responseText==1){
                    $.ajax({
                        type: "POST",
                        url: "./{{users}}/index.php?module=email_accounts&acc=listemail",
                        complete: function(datos){
                            $('.dataTables-example').DataTable().destroy();
                            $("#contftp").html(datos.responseText);
                            $('.dataTables-example').DataTable();
                            noti_bubble('{{langmod.EMDELETEEMOK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
                            refrespanelnew('email_accounts');
                            btnporcess('on','btnyesdel','{{ langmod.EYES }}');
                            $("#deletemodal").modal('hide');
                            return false;
                        }
                    });
                }else{
                    noti_bubble('{{langmod.EERROR2}}','{{langmod.EWARNING}}','error',false,false,'3000',true);
                    btnporcess('on','btnyesdel','{{ langmod.EYES }}');
                    return false;
                }
            }
        });
        return false;
    }
    return false;
}
function btncancelemail(){
    $("#addmodal").modal('hide');
}
function btnaddemail(){
    $("#alertemail").hide('blind');
    if(($("#emailaddres").val()=='') || ($("#domain").val()=='') || ($("#pass").val()=='')){
        noti_bubble('{{langmod.EFEILDR}}','{{langmod.EMERROR}}','error',false,false,'3000',true);
        return false;
    }else{
        var pass=$("#pass").val();
        pass=pass.replace('&','||@||');
        pass=pass.replace('%','|/@/|');

        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        btnporcess('off','btnaddemail','{{ langmod.EMLABEL9 }}');
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=addemail",
            data: "email="+$("#emailaddres").val()+"&domain="+$("#domain").val()+"&pass="+pass+"&quotamail="+$("#quotamail").val(),
            complete: function(datos){
                if((datos.responseText==4) || (datos.responseText==5) || (datos.responseText==6)){
                    if(datos.responseText==4){ var msj='ssss{{langmod.EERROR4}}';}
                    if(datos.responseText==5){ var msj='dddd{{langmod.EERROR5}}';}
                    if(datos.responseText==6){ var msj='ffff{{langmod.EERROR6}}';}
                    noti_bubble(msj,'{{langmod.EMERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btnaddemail','{{ langmod.EADD }}');
                    return false;
                }else{
                    $.ajax({
                        type: "POST",
                        url: "./{{users}}/index.php?module=email_accounts&acc=listemail",
                        complete: function(datos){
                            $('.dataTables-example').DataTable().destroy();
                            $("#contftp").html(datos.responseText);
                            $('.dataTables-example').DataTable();
                            noti_bubble('{{langmod.EMSUCCT}}','{{langmod.EMCREATOK}}','success',false,false,'3000',true);
                            refrespanelnew('email_accounts');
                            btnporcess('on','btnaddemail','{{ langmod.EADD }}');
                            $("#addmodal").modal('hide');
                            return false;
                        }
                    });
                }
            }
        });
        return false;
    }
}
function chancetabemail(sw){
    if(sw==0){
        $("#indemail").show();
        $("#indforw").hide();
    }else{
        $("#indforw").show();
        $("#indemail").hide();
    }
}
function editforwar(forward,goto,idtr){
    var msj='<p><b>{{langmod.ETITLEFW}}:  </b> '+Base64.decode(forward)+'</p><input type="hidden" id="hiddenemail" value="'+Base64.decode(forward)+'"><input type="hidden" id="idtrfw" value="'+idtr+'">';
    $("#contentmodaludp").html(msj);
    $("#forwardersupd").val(Base64.decode(goto));
    $("#editforwarddomain").modal('toggle');
    return false;
}
function forwardactive(email,st){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=email_accounts&acc=changestforward",
        data: "email=" + email+"&st="+st,
        complete: function (datos) {
            listforwar();
            noti_bubble('{{langmod.EMSUCCT}}','{{langmod.EUPDFORW}}','success',false,false,'3000',true);
            return false;
        }
    });
}
function forwardelete(st,email,tr){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.EMLABEL6 }}</span></button><h4 class="modal-title">{{langmod.EALERTDELEFW}}</h4><small class="font-bold">{{langmod.DBDELETEUSER}}</small>';
        var strbody = '<p class="text-center">'+Base64.decode(email)+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.ENO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return forwardelete(1,\''+email+'\',\''+tr+'\')">{{langmod.EYES}}</button>';

        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;
    }else if(st==1){
        btnporcess('off','btnyesdel','{{ langmod.EMLABEL9 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=forwardelete",
            data:"email="+Base64.decode(email),
            complete: function(datos){
                listforwar();
                btnporcess('off','btnyesdel','{{ langmod.EYES }}');
                refrespanelnew('email_forwarders');
                noti_bubble('{{langmod.EMSUCCT}}','{{langmod.EMDELETEEMOK}}','success',false,false,'3000',true);
                $("#deletemodal").modal('hide');
                return false;
            }
        });
    }
}
function autofdelete(st,email,pos){
    if(st==0){
        var headeradd='<h4>{{langmod.ARDELETEAT}}</h4>';
        var bodyadd='<p class="text-center">'+email+'</p><input type="hidden" value="'+email+'" id="deleteemailf">';
        var footeradd='<button class="btn btn-default btn-xs mr5 mb10"  id="btn-cancelfemail"  onclick="return cancelfemail()">{{langmod.ARCANCEL}}</button>   <button class="btn btn-primary btn-xs mr5 mb10" id="autofdelete" onclick="return autofdelete(1,\''+email+'\','+pos+')">{{langmod.ARDELETE}}</button>';
        $("#deletemodal .modal-header").html(headeradd);
        $("#deletemodal .modal-body").html(bodyadd);
        $("#deletemodal .modal-footer").html(footeradd);
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        btnporcess('off','autofdelete','{{ langmod.AULABEL5 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mail_autoreply&acc=autofdelete",
            data:"email="+$("#deleteemailf").val(),
            complete: function(datos){
                btnporcess('on','autofdelete','{{ langmod.ARDELETE }}');
                listautof();
                refrespanelnew('mail_autoreply');
                $("#deletemodal").modal('hide');
                return false;
            }
        });
    }
    return false;
}
function cancelfemail(){
    $("#deletemodal").modal('hide');
    return false;
}
function sendonlydate(sw){
    $("#start_date").datepicker();
    $("#end_date").datepicker();
    $("#start_time").clockpicker();
    $("#end_time").clockpicker();

    if(sw==0){
        if($("#sendonlydate").prop('checked')){
            $("#start_date").prop('disabled',false);
            $("#end_date").prop('disabled',false);
            $("#start_time").prop('disabled',false);
            $("#end_time").prop('disabled',false);
            $("#sendonlydate").val(1);
        }else{
            $("#start_date").prop('disabled',true);
            $("#end_date").prop('disabled',true);
            $("#start_time").prop('disabled',true);
            $("#end_time").prop('disabled',true);
            $("#sendonlydate").val(0);
        }
    }else{
        if($("#sendonlydate-edit").attr('checked')){
            $("#start_date-edit").attr('disabled',false);
            $("#end_date-edit").attr('disabled',false);
            $("#start_time-edit").attr('disabled',false);
            $("#end_time-edit").attr('disabled',false);
            $("#sendonlydate-edit").val(1);
        }else{
            $("#start_date-edit").attr('disabled',true);
            $("#end_date-edit").attr('disabled',true);
            $("#start_time-edit").attr('disabled',true);
            $("#end_time-edit").attr('disabled',true);
            $("#sendonlydate-edit").val(0);
        }
    }
}
function autofedit(email,pos){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_autoreply&acc=autofedit",
        data:"email="+email,
        complete: function(datos){
            var str=datos.responseText;
            var res = str.split("||");
            $("#editmodal .modal-title").html('{{ langmod.AULABEL3 }}  '+email);
            $("#modsubjectautof").val(res[0]);
            $("#modmessajeautof").val(res[1]);
            $("#start_date").val(res[2]);
            $("#start_time").val(res[3]);
            $("#end_date").val(res[4]);
            $("#end_time").val(res[5]);

            var datehour1=res[2];
            var datehour2=res[3];
            if(res[2]!=''){
                $("#start_date-edit").val(res[2]);
                $("#start_time-edit").val(res[3]);
            }else{
                $("#start_date-edit").val('');
                $("#start_time-edit").val('');
            }
            if(res[4]!=''){
                $("#end_date-edit").val(res[4]);
                $("#end_time-edit").val(res[5]);
            }else{
                $("#end_date-edit").val('');
                $("#end_time-edit").val('');
            }
            if(res[6]==1){
                $("#sendonlydate-edit").attr('checked',true);
                $("#sendonlydate-edit").val(1);
                $("#start_date-edit").attr('disabled',false);
                $("#start_time-edit").attr('disabled',false);
                $("#end_date-edit").attr('disabled',false);
                $("#end_time-edit").attr('disabled',false);
            }else{
                $("#sendonlydate-edit").removeAttr('checked');
                $("#sendonlydate-edit").val(0);
                $("#start_date-edit").attr('disabled',true);
                $("#start_time-edit").attr('disabled',true);
                $("#end_date-edit").attr('disabled',true);
                $("#end_time-edit").attr('disabled',true);
            }
            $("#modemailautof").val(email+'||'+pos);
            $("#addautofbtn").hide();
            $("#modautofdiv").show('blind');
            //alert();
            $("#editmodal").modal('toggle');
            return false;
        }
    });
    return false;
}
function listautof(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_autoreply&acc=listautof",
        complete: function(datos){
            //$('.dataTables-example').DataTable().destroy();
            $('#listtrf').DataTable().destroy();
            $("#contenttr").html(datos.responseText);
            $('#listtrf').DataTable();
            //$('.dataTables-example').DataTable();
            return false;
        }
    });
}
function autofchangest(email,pos){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_autoreply&acc=autofchangest",
        data:"email="+email+"&pos="+pos,
        complete: function(datos){
            listautof();
            if(datos.responseText==1){
                noti_bubble('{{langmod.ARACTIVEEMAIL}}','{{langmod.ARSUCCT}}','success',false,false,'3000',true);
                return false;
            }
            if(datos.responseText==5){
                noti_bubble('{{langmod.ARDESACTIVEEMAIL}}','{{langmod.ARSUCCT}}','success',false,false,'3000',true);
                return false;
            }
            return false;
        }
    });
}
function changest(domain,st){
    $(".btnchangest").attr('disabled',true);
    $(".btnchangest").addClass('disabled');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_routing&acc=changest",
        data: "domain=" + domain + "&st=" + st,
        complete: function (datos) {
            updatelistmxrouting();
            if(datos.responseText==1){
                noti_bubble('{{langmod.MRSUCCES2}}','{{langmod.MRSUCCES}}','success',false,false,'3000',true);
            }else{
                noti_bubble('{{langmod.MRERRORT2}}','{{langmod.MRERRORT}}','error',false,false,'3000',true);
            }
            $(".btnchangest").attr('disabled',false);
            $(".btnchangest").removeClass('disabled');
            return false;
        }
    })
}
function updatelistmxrouting(){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_routing&acc=updatelist",
        complete: function (datos) {
            $("#listtr").html(datos.responseText);
            return false;
        }
    })
}
function statusdomiain(domain){
    $("#stajax").hide('blind');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_routing&acc=statusdomiain",
        data: "domain=" + domain,
        complete: function (datos) {
            noti_bubble(datos.responseText,'Status','warning',true,true,'3000',false);
            return false;
        }
    })
    return false;
}
function openmodalreg(reg){
    $("#domainsel_"+reg).val($("#domainsel").val());
    $("#modal-"+reg).modal('toggle');
    $("#typeregihide").val(reg);
    if(reg=="CAA"){$("#namereg_CAA").val($("#domainsel").val()+'.');}
    return false;
}
function addregdns(){
    var reg=$("#typeregihide").val();
    var namereg=$("#namereg_"+reg).val();
    var cachereg=$("#cachereg_"+reg).val();
    var valuereg=$("#valuereg_"+reg).val();
    var domainsel=$("#domainsel_"+reg).val();
    var flag=$("#flag_"+reg).val();
    var tag=$("#tag_"+reg).val();
    //alert(reg);
    if((namereg=='')||(valuereg=='')){
        if(namereg==''){$("#namereg").css("border-color", "#A80705");}
        if(valuereg==''){$("#valuereg").css("border-color", "#A80705");}
        noti_bubble('{{langmod.DNSMSJ1}}','{{langmod.DNSERROR}}','error',false,false,'3000',true);
        return false;
    }else{
        $(".btn-reg").addClass('disabled');
        $(".btn-reg").attr('disabled',true);
        $("#addregdns").addClass('disabled');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=dns_zone_editor&acc=addregdns",
            data:"domain="+domainsel+"&namereg="+namereg+"&valuereg="+valuereg+"&cachereg="+cachereg+"&reg="+reg+"&flag="+flag+"&tag="+tag,
            complete: function(datos){
                //alert(datos.responseText);
                //return false;
                $.ajax({
                    type: "POST",
                    url: "./{{users}}/index.php?module=dns_zone_editor&acc=restbind",
                    data:"domain="+$("#domainsel").val(),
                    complete: function(datos){
                        //alert(datos.responseText);
                        if(datos.responseText==1){
                            $("#namereg").val('');
                            $("#cachereg").val('');
                            $("#valuereg").val('');
                            $("#addregdns").removeClass('disabled');
                            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
                            $.ajax({
                                type: "POST",
                                url: "./{{users}}/index.php?module=dns_zone_editor&acc=paserrecord",
                                data:"domain="+$("#domainsel").val(),
                                complete: function(datos){
                                    noti_bubble('{{langmod.DNSZONEOK}}','{{langmod.DNSSUCCT}}','success',false,false,'3000',true);
                                    $("#trnew").html(datos.responseText);
                                    $("#table3").show('blind');
                                    $(".btn-reg").removeClass('disabled');
                                    $(".btn-reg").attr('disabled',false);
                                    $("#modal-"+reg).modal('hide');
                                    return false;
                                }
                            });
                        }else{
                            noti_bubble('{{langmod.DNSZONEOFF}}','{{langmod.DNSERROR}}','error',false,false,'3000',true);
                            $("#btn-test").removeClass('disabled');
                            $("#divbtn-test").show();
                            $("#divbtn-addregdns").hide();
                            $(".btn-reg").removeClass('disabled');
                            $(".btn-reg").attr('disabled',false);
                        }
                        return false;
                    }
                });
                return false;
            }
        });
    }
}
function deleterecord(st,domain,line,tr){
    if(st==0){
        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SSLCLOSE }}</span></button><h4 class="modal-title">{{langmod.DNSWARNING}}</h4><small class="font-bold">{{langmod.DNSDELETEFILE}}</small>';
        var strbody = '<p class="text-center">'+domain+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.DNSNO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deleterecord(1,\''+domain+'\','+line+','+tr+')">{{langmod.DNSYES}}</button>';

        $("#deletemodal .modal-header").html(strheader);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=dns_zone_editor&acc=deleteregzone",
            data:"domain="+domain+"&line="+line,
            complete: function(datos){
                //alert(datos.responseText);
                noti_bubble('{{langmod.DNSDELETEOK}}','{{langmod.DNSSUCCT}}','success',false,false,'3000',true);
                $("#"+tr).hide();
                $("#deletemodal").modal('hide');
            }
        });
    }
}
function btnsrvreg(){
    var reg=$("#typeregihide").val();
    var srvname=$("#srvname").val();
    var srvsymb=$("#srvsymb").val();
    var srvprotocol=$("#srvprotocol").val();
    var srvprio=$("#srvprio").val();
    var srvweight=$("#srvweight").val();
    var srvport=$("#srvport").val();
    var srvtarget=$("#srvtarget").val();
    var srvttl=$("#srvttl").val();
    var domainsel=$("#domainsel_SRV").val();
    if((srvsymb=='')||(srvprotocol=='')||(srvprio=='')||(srvweight=='')||(srvport=='')||(srvtarget=='')||(srvttl=='')){
        if(srvsymb==''){$("#srvsymb").css("border-color", "#A80705");}
        if(srvprotocol==''){$("#srvprotocol").css("border-color", "#A80705");}
        if(srvprio==''){$("#srvprio").css("border-color", "#A80705");}
        if(srvweight==''){$("#srvweight").css("border-color", "#A80705");}
        if(srvport==''){$("#srvport").css("border-color", "#A80705");}
        if(srvtarget==''){$("#srvtarget").css("border-color", "#A80705");}
        if(srvttl==''){$("#srvttl").css("border-color", "#A80705");}
        noti_bubble('{{langmod.DNSMSJ1}}','{{langmod.DNSERROR}}','error',false,false,'3000',true);
        return false;
    }else{
        $("#btn-srvreg").addClass('disabled');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=dns_zone_editor&acc=addregdns",
            data:"domain="+domainsel+"&srvname="+srvname+"&srvsymb="+srvsymb+"&srvprotocol="+srvprotocol+"&srvprio="+srvprio+"&srvweight="+srvweight+"&srvport="+srvport+"&srvtarget="+srvtarget+"&srvttl="+srvttl+"&reg="+reg,
            complete: function(datos){
                $("#trnew").html(datos.responseText);
                $("#srvname").val('');
                $("#srvsymb").val('');
                $("#srvprotocol").val('');
                $("#srvprio").val('');
                $("#srvweight").val('');
                $("#srvport").val('');
                $("#srvtarget").val('');
                $("#srvttl").val('');
                $.ajax({
                    type: "POST",
                    url: "./{{users}}/index.php?module=dns_zone_editor&acc=restbind",
                    data:"domain="+$("#domainsel").val(),
                    complete: function(datos){
                        if(datos.responseText==1){
                            $("#namereg").val('');
                            $("#cachereg").val('');
                            $("#valuereg").val('');
                            $("#btn-srvreg").removeClass('disabled');
                            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
                            $.ajax({
                                type: "POST",
                                url: "./{{users}}/index.php?module=dns_zone_editor&acc=paserrecord",
                                data:"domain="+$("#domainsel").val(),
                                complete: function(datos){
                                    noti_bubble('{{langmod.DNSZONEOK}}','{{langmod.DNSSUCCT}}','success',false,false,'3000',true);
                                    $("#btn-srvreg").removeClass('disabled');
                                    $("#trnew").html(datos.responseText);
                                    $("#table3").show('blind');
                                    return false;
                                }
                            });
                        }else{
                            noti_bubble('{{langmod.DNSZONEOFF}}','{{langmod.DNSERROR}}','error',false,false,'3000',true);
                            $("#btn-srvreg").removeClass('disabled');
                            $("#divbtn-test").show();
                            $("#divbtn-addregdns").hide();
                        }
                        return false;
                    }
                });
                return false;
            }
        });
    }
}
function listregphpini(){
    $.ajax({
        type: "POST",
        url: "./{{ users }}/index.php?module=phpini_editor&acc=listregphpini",
        data: "file="+$("#hfilename").val(),
        complete: function (datos) {
            //alert(datos.responseText);
            var trs='';
            var str=datos.responseText;
            var valuehidden=str.split('/*/');
            var linet=valuehidden[0].split('/:');
            var countline=linet.length;
            for(i=0;i<(countline-1);i++){
                trs+='<tr>';
                var trozos=linet[i].split("|");
                var namelabel=trozos[1];
                var n = namelabel.indexOf(";;");
                var btnst='';
                if(n == -1){btnst='<button type="button" class="btn btn-warning btn-xs" onclick="return disablephpini(0,'+(i+1)+')" style="margin-left: 2px">Disable</button>  ';
                }else{
                    var fin = str.length;
                    var res = namelabel.substring(2, fin);
                    namelabel=res;
                    btnst='<button type="button" class="btn btn-default btn-xs" onclick="return disablephpini(1,'+(i+1)+')" style="margin-left: 2px">Enable</button>  ';
                }
                trs+='<td><label class="col-form-label">'+namelabel+'</label></td>';
                trs+='<td><input type="text" id="'+namelabel+'" value="'+trozos[3]+'" class="form-control"></td>';
                trs+='<td class="text-center">'+btnst+'<button type="button" class="btn btn-danger btn-xs" onclick="return deletephpini(0,'+(i+1)+')">Delete</button></td>';
                trs+='</tr>';
                //}
            }
            noti_bubble('{{langmod.EXIST}}','{{langmod.EXITO}}','success',true,false,'3000',true);
            $("#conteditphp").html(trs);
            $("#addnew_tex").val('');
            $("#valuehidden").val(valuehidden[1]);
            return false;
        }
    });
}
function changestnot(elem){
    $.ajax({
        type: "POST",
        url: "./{{ users }}/index.php?module=notification_center&acc=changestnot",
        data: "elem="+elem,
        complete: function (datos) {

        }
    });
}
function deletetar(st,file,div){
    if(st==0){

        /*var msj='<div class="alert alert-warning fade in"><i class="glyphicon glyphicon-warning-sign alert-icon "></i><strong>{{langmod.BCARNING}}</strong> {{langmod.BCDELETEFILE}} <strong>'+file+'</strong>    <a href="#" onclick="return deletetar(1,\''+file+'\',\''+div+'\')">  <b>{{langmod.BCYES}}</b></a>  /  <a href="#" data-dismiss="alert" aria-hidden="true" ><b>{{langmod.BCNO}}</b></a>';
        $("#alertback").html(msj);
        $("#alertback").show('blind');
        return false;*/

        var strheader = '<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{langmod.BCARNING}}</span></button><h4 class="modal-title">{{langmod.BCDELETEFILE}}</h4>';
        var strbody = '<p class="text-center">'+file+'</p>';
        var strfooter = '<button type="button" class="btn btn-white" data-dismiss="modal">{{langmod.BCNO}}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deletetar(\'1\',\''+file+'\',\''+div+'\')">{{langmod.BCYES}}</button>';
        $("#deletemodal .modal-footer").html(strfooter);
        $("#deletemodal .modal-body").html(strbody);
        $("#deletemodal .modal-header").html(strheader);
        ///btnporcess('on','btnyesdel','{{ langmod.DYES }}');
        $("#deletemodal").modal('toggle');
        return false;


    }
    if(st==1){
        btnporcess('off','btnyesdel','{{ langmod.BCLABEL10 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=backups&acc=deletetar",
            data:"file="+file,
            complete: function(datos){
                if(datos.responseText==1){
                    $("#tar"+div).hide();
                    $("#alertback").hide('blind');
                    noti_bubble('{{langmod.BCDELETEOK}}','{{langmod.BCSUCCT}}','success',false,false,'3000',true);
                    btnporcess('on','btnyesdel','{{ langmod.DYES }}');
                    $("#deletemodal").modal('toggle');
                    return false;
                }else{
                    noti_bubble('{{langmod.BCRROR2}}','{{langmod.BCARNING}}','error',false,false,'3000',true);
                    btnporcess('on','btnyesdel','{{ langmod.DYES }}');
                    return false;
                }
            }
        });
    }
}
function ajaxcreatebackup(email,typefile,div){
    $("#"+div).addClass('disabled');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    noti_bubble('{{langmod.BCALERT1}}','{{langmod.BCSUCCT}}','warning',true,true,'3000',true);
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=backups&acc=backupfullnow",
        data:"email="+email+"&typefile="+typefile,
        complete: function(datos){
            $("#"+div).removeClass('disabled');
            noti_bubble('{{langmod.BSBACKUPOK}}','{{langmod.BCSUCCT}}','success',false,false,'3000',true);
            return false;
        }
    });
}
function typerestore(sw){
    if(sw==0){
        $("#backupfile").hide('blind');
        $("#serverbackup").show('blind');
        $("#btnretoreuser").show();
        searchbackup();

    }else{
        $("#serverbackup").hide('blind');
        $("#backupfile").show('blind');
        $("#btnretoreuser").hide();
    }
}
function searchbackup(){
    var spin = '<i class="fa fa-spinner fa-spin"></i>';
    $("#restselect").html(spin);
    $("#restradio").html(spin);
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=backups&acc=type",
        complete: function(datos){
            //console.log(datos.responseText);
            //alert(datos.responseText);
            var str = datos.responseText;
            var trozo = str.split('|@|');
            $("#restselect").html(trozo[0]);
            $("#restradio").html(trozo[1]);
            return false;
        }
    });
    return false;
}
function valiarbackuser(sw){
    var swbtn=0;
    if($("#homeuser").attr('checked')){
        if(sw==0){ noti_bubble('{{langmod.BACKALER1}}','{{langmod.BCARNING}}','error',false,false,'3000',true); }
        if(sw==1){ noti_bubble('{{langmod.BACKALER2}}','{{langmod.BCARNING}}','error',false,false,'3000',true); }

        $("#btnretore").attr('disabled',false);
        $("#btnretore").removeClass('disabled');
        $("#errorbackup").hide('blind');
        swbtn=swbtn+1;
    }else{
        //$("#alertbackup").hide('blind');
        $("#alertbackup").html('');
    }
    if($("#mysqluser").attr('checked')){
        $("#alertbackup2").html(msj2);
        $("#alertbackup2").show('blind');
        $("#btnretore").attr('disabled',false);
        $("#btnretore").removeClass('disabled');
        $("#errorbackup").hide('blind');
        swbtn=swbtn+1;
    }else{
        $("#alertbackup2").hide('blind');
        $("#alertbackup2").html('');
    }
    if($("#mailuser").attr('checked')){
        $("#btnretore").attr('disabled',false);
        $("#btnretore").removeClass('disabled');
        $("#errorbackup").hide('blind');
        swbtn=swbtn+1;
    }
    if($("#ftpaccounts").attr('checked')){
        $("#btnretore").attr('disabled',false);
        $("#btnretore").removeClass('disabled');
        $("#errorbackup").hide('blind');
        swbtn=swbtn+1;
    }
    if($("#nameds").attr('checked')){
        $("#btnretore").attr('disabled',false);
        $("#btnretore").removeClass('disabled');
        $("#errorbackup").hide('blind');
        swbtn=swbtn+1;
    }
    //if(swbtn>0){ $("#btnretoreuser").show('blind'); }else{ $("#btnretoreuser").hide('blind'); }
}
function btnaddbdandusernew(){
    var sw=0;
    if(($("#bdname").val()=='')||($("#pass1new").val()=='')||($("#pass2new").val()=='')){ var msj='{{langmod.DBERROR4}}'; sw=1;}
    if($("#pass1new").val()!=$("#pass2new").val()){ var msj='{{langmod.DBERROR3}}'; sw=1; }
    if(sw==1){
        noti_bubble(msj,'','error',false,false,'3000',true);
        return false;
    }else{
        var pass=Base64.encode($("#pass1new").val());
        var collation='';
        var charset=$("#charset").val();
        btnporcess('off','btn-addbdandusernew','{{ langmod.DBLABEL4 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mysql_manager&acc=newmysqlanduser",
            data: "datebase="+$("#bdname").val()+"&pass="+pass+"&collation="+collation+"&charset="+charset,
            complete: function(datos){
                if(datos.responseText=='OK'){
                    $("#bdname").val('');
                    $("#pass1new").val('');
                    $("#pass2new").val('');
                    refrestable();
                    refrespanelnew('mysql_manager');
                    $("#modal-createbdanduser").modal('hide');
                    noti_bubble('{{langmod.DBSUCCT}}','{{langmod.DMMYSQLOK}}','success',false,false);
                    btnporcess('on','btn-addbdandusernew','{{ langmod.DBCREATEMODAL }}');
                }else if(datos.responseText=='1'){
                    noti_bubble('','{{langmod.DBERROR1}}','error',false,false);
                    btnporcess('on','btn-addbdandusernew','{{ langmod.DBCREATEMODAL }}');
                }else if(datos.responseText==2){
                    noti_bubble('','{{langmod.DBERROR2}}','error',false,false);
                    btnporcess('on','btn-addbdandusernew','{{ langmod.DBCREATEMODAL }}');
                }
                return false;
            }
        });
        return false;
    }
}
function changepassmysqluser(st,db,user,host){
    $('#mysqluserpass').val(user+'||'+host);
    $("#ttcgpss").html(user+' '+host);
    $("#modal-changepassusermysql").modal('toggle');
    return false;
}
function btnchangpassusermysql(){
    btnporcess('off','btn-changpassusermysql','{{ langmod.DBLABEL4 }}');
    if(($("#newpass2user").val()=='') || ($("#newpass2user2").val()=='')){
        noti_bubble('{{langmod.DBERROR4}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
        btnporcess('on','btn-changpassusermysql','{{langene.MDBTN_SAVE}}');
        return false;
    }else{
        if($("#newpass2user").val()!=$("#newpass2user2").val()){
            noti_bubble('{{langmod.DBERROR3}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
            btnporcess('on','btn-changpassusermysql','{{langene.MDBTN_SAVE}}');
            return false;
        }else{
            var merge=$("#mysqluserpass").val();
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=mail_autoreply&acc=changepassuserdb",
                data:"dates="+merge+"&passuser="+Base64.encode($("#newpass2user").val()),
                complete: function(datos){
                    if(datos.responseText==1){
                        $("#modal-changepassusermysql").modal('hide');
                        noti_bubble('{{langmod.DBCHANGEPASSEXIST}}','{{langmod.DBSUCCT}}','success',false,false,'3000',true);
                        btnporcess('on','btn-changpassusermysql','{{langene.MDBTN_SAVE}}');
                    }else{
                        noti_bubble('{{langmod.DBERROR2}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
                        btnporcess('on','btn-changpassusermysql','{{langene.MDBTN_SAVE}}');
                    }
                    return false;
                }
            });
            return false;
        }
    }
    return false;
}
function addforwarbtn(){
    var vheader='';
    var vbody='<div class="row"><div class="col-sm-3"><input id="forwaraddres" class="form-control" value="" placeholder="{{ langmod.EALIAS }}"></div><div class="col-sm-3"><select id="domainforwar" class="form-control"><option value="">{{ langmod.ECHOOSE }}</option>';
        {% for email2 in mod.email2 %}
        vbody+='<option value="{{ email2.domain }}">@{{ email2.domain }}</option>';
        {% endfor %}
        vbody+='</select></div></div><div class="row"><div class="col-sm-12" style=" margin-top: 5px"><textarea id="forwarders" class="form-control" placeholder="email@email.com,email2@email2.com"></textarea> {{ langmod.ETITLEF3 }}</div></div>';
    var vfooter='<button class="btn btn-default btn-xs mr5 mb10"  id="btncancelforwar" onclick="return btncancelforwar()">{{langmod.ECANDELDOMAIN}}</button>  <button class="btn btn-primary btn-xs mr5 mb10" id="btn-addforwar" onclick="return btnaddforwar()">{{langmod.EADD}}</button>';
    $("#addmodal .modal-body").html(vbody);
    $("#addmodal .modal-footer").html(vfooter);
    $("#addmodal").modal('toggle');
    return false;
}
function btncancelforwar(){
    $("#addmodal").modal('hide');
    return false;
}
function btnaddforwar(){
    $("#alertforwar").hide();
    if(($("#forwaraddres").val()=='') || ($("#domainforwar").val()=='') || ($("#forwarders").val()=='')){
        noti_bubble('{{langmod.EFEILDR}}','{{langmod.EMERROR}}','error',false,false,'3000',true);
        return false;
    }else{
        btnporcess('off','btn-addforwar','{{ langmod.EMLABEL9 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=addforwar",
            data: "forwaraddres="+$("#forwaraddres").val()+"&domainforwar="+$("#domainforwar").val()+"&forwarders="+$("#forwarders").val(),
            complete: function(datos){
                if((datos.responseText==6) || (datos.responseText==9)){
                    if(datos.responseText==6){ var msj='{{langmod.ERROR6}}'; }else{ var msj='{{langmod.ERROR9}}'; }
                    noti_bubble(msj,'{{langmod.EMERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn-addforwar','{{ langmod.EYES }}');
                    return false;
                } else{
                    listforwar();
                    noti_bubble('{{langmod.EMCREATOK}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
                    refrespanelnew('email_forwarders');
                    btnporcess('on','btn-addforwar','{{ langmod.EYES }}');
                    $("#addmodal").modal('hide');
                }
            }
        });
    }
}
function listforwar(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=email_accounts&acc=listforwar",
        complete: function(datos){
            $('.dataTables-example').DataTable().destroy();
            $("#contenttrfo").html(datos.responseText);
            $('.dataTables-example').DataTable();
        }
    });
}
function processlistmysql(sw){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=procsmysql",
        complete: function(datos){
            //alert(datos.responseText);
            $("#contentmodalplmysql").html(datos.responseText);
            if(sw==1){
                timer = setTimeout('processlistmysql(1)', 4000);
            }else{
                return false;
            }
        }
    });
}
function btnaddautof(){
    if(($("#emailautof").val()=='') || ($("#domainautof").val()=='') || ($("#subjectautof").val()=='') || ($("#messajeautof").val()=='')){
        noti_bubble('','{{langmod.ARERRO1}}','error',false,false,'3000',true);
        return false;
    }else{
        btnporcess('off','btnaddautof2','{{ langmod.AULABEL5 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mail_autoreply&acc=addautof",
            data: "emailautof="+$("#emailautof").val()+"&domainautof="+$("#domainautof").val()+"&subjectautof="+$("#subjectautof").val()+"&messajeautof="+$("#messajeautof").val()+"&start_date="+$("#start_date").val()+"&end_date="+$("#end_date").val()+"&start_time="+$("#start_time").val()+"&end_time="+$("#end_time").val()+"&sendonlydate="+$("#sendonlydate").val(),
            complete: function(datos){
                if((datos.responseText==6) || (datos.responseText==10)){
                    if(datos.responseText==6){ var msj='{{langmod.ARERROR6}}';}
                    if(datos.responseText==10){ var msj='{{langmod.ARERROR10}}';}
                    noti_bubble(msj,'{{langmod.ARMERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btnaddautof2','{{ langmod.ARADD }}');
                    $("#addautofbtn").hide();
                    return false;
                }else{
                    listautof();
                    $("#emailautof").val('');
                    $("#subjectautof").val('');
                    $("#messajeautof").val('');
                    noti_bubble('{{langmod.AROKADD}}','{{langmod.ARSUCCT}}','success',false,false,'3000',true);
                    btnporcess('on','btnaddautof2','{{ langmod.ARADD }}');
                    refrespanelnew('mail_autoreply');
                    $("#addmodal").modal('hide');
                    return false;
                }
            }
        });
        return false;
    }

}
function deletwp(pathwp,line,ps){
    var troz=pathwp.split('@');
    if(ps=='wp'){var pack='WordPress';}
    if(ps=='ps'){var pack='PrestaShop';}
    if(ps=='dp'){var pack='Drupal';}
    if(ps=='jl'){var pack='Joomla';}
    //alert('Aqui: '+pathwp);
    $("#valuedelete").val(pathwp);
    $("#line").val(line);
    var troz2=pathwp.split('@');
    var msj='<i class="fa fa-exclamation-triangle"></i>    <strong>{{ langmod.ADDDDP28 }}</strong>    {{ langmod.ADDDDP31 }}';
    msj+='<br><br><div class="radio-custom"><input type="radio" name="deletewp" value="1" id="radio1" checked><label for="radio1">{{ langmod.ADDDDP41 }} <b>'+troz[1]+'</b> {{ langmod.ADDDDP42 }}</label></div>';
    msj+='<div class="radio-custom"><input type="radio" name="deletewp" value="2" checked="checked" id="radio2"><label for="radio2">{{ langmod.ADDDDP43 }} '+pack+' {{ langmod.ADDDDP44 }}</label></div>';
    msj+='<input type="hidden" id="valuedelete" value="2"><div class="radio-custom"><input type="radio" name="deletewp" value="3" id="radio3"><label for="radio3">{{ langmod.ADDDDP43 }} '+pack+' {{ langmod.ADDDDP44 }}</label></div>';
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.ADDDDP29 }}</span></button><h4 class="modal-title">{{ langmod.ADDDDP28 }}</h4><small class="font-bold">{{ langmod.ADDDDP30 }} </small>';
    var bodyvar='<p class="text-center"><b>'+troz[1]+'</b></p>'+msj;
    var footervar='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.ADDDDP29 }}</button><button type="button" class="btn btn-primary" id="btnyesdel" onclick="return deletewp(\''+ps+'\')">{{ langmod.TYES }}</button>';
    //$(".modal-dialog").removeClass('modal-lg');
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(footervar);
    $("#addmodal").modal('toggle');
    return false;
}
function deletewp(pack){
    var op=$('input:radio[name=deletewp]:checked').val();
    var sitedelete=$("#valuedelete").val();
    var line=$("#line").val();

    if(pack=='wp'){ var urlajax="./{{users}}/index.php?module=addons&acc=wordpress&op=deletewp"; }
    if(pack=='ps'){ var urlajax="./{{users}}/index.php?module=addons&acc=prestashop&op=deleteps"; }
    if(pack=='dp'){ var urlajax="./{{users}}/index.php?module=addons&acc=drupal&op=deletedp"; }
    if(pack=='jl'){ var urlajax="./{{users}}/index.php?module=addons&acc=joomla&op=deletejl"; }
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: urlajax,
        data:"option="+op+"&site="+sitedelete+"&line="+line+"&pack="+pack,
        complete: function(datos){
            //alert(datos.responseText);// return false;
            if(datos.responseText==1){
                if(pack=='wp'){ $("#tdwp"+line).hide('blind'); $("#messagewp").hide('blind'); $("#messagewp").html(''); }
                if(pack=='ps'){ $("#tdps"+line).hide('blind'); $("#messageps").hide('blind'); $("#messageps").html(''); }
                if(pack=='dp'){ $("#tddp"+line).hide('blind'); $("#messagedp").hide('blind'); $("#messagedp").html(''); }
                if(pack=='jl'){ $("#tdjl"+line).hide('blind'); $("#messagedp").hide('blind'); $("#messagejl").html(''); }
                noti_bubble('{{langmod.ADDSUCCT}}','{{langmod.ADDALERT1}}','success',false,false,'3000',true);
                $("#addmodal").modal('toggle');
            }
            return false;
        }
    });
    return false;
}
function restoreback(st,file,row){
    if(st==0){
        $("#btndole"+row).hide();
        $("#btnacition"+row).show();
        $("#hiddenvalue").val(file+'||'+row);
        $("#myModaldetail").modal('toggle');
    }
    if(st==1){
        $("#hiddenvalue").val(file+'||'+row);
        $("#myModaldetail").modal('toggle');
        return false;
    }
    if(st==2){
        $("#btnacition"+row).hide();
        $("#btndole"+row).show();
    }
    if(st==3){
        var sw='';
        if($("#homeuser2").prop('checked')){sw=sw+'homeuser||';}
        if($("#mysqluser2").prop('checked')){sw=sw+'mysqluser||';}
        if($("#mailuser2").prop('checked')){sw=sw+'mailuser||';}
        if($("#ftpaccounts2").prop('checked')){sw=sw+'ftpaccounts||';}
        if($("#nameds2").prop('checked')){sw=sw+'nameds||';}
        if($("#passaccount").prop('checked')){sw=sw+'passaccount||';}

        if(sw!=''){
            var trozval=$("#hiddenvalue").val();
            var trozo =trozval.split('||');
            var row =trozo[1];
            var file =trozo[0];
            $("#myModaldetail").modal('toggle');
            $("#btn-restorenow"+row).html('<i class="fa fa-spinner fa-spin"></i> {{langmod.BCLABEL18}}');
            $("#btn-restorenow"+row).addClass('disabled');
            $("#btn-restorenow"+row).attr('disabled',true);
            $("#btn-restorecancel"+row).hide();
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=backups&acc=restoreback",
                data:"file="+file+"&options="+sw,
                complete: function(datos){
                    console.log(datos.responseText);
                    if(datos.responseText==1){
                        $("#btnacition"+row).hide();
                        $("#btndole"+row).show();
                        noti_bubble('{{ langmod.BCLABEL15 }}','{{  langmod.BCSUCCT }}','success',false,false,'3000',true);
                    }else{
                        noti_bubble('{{ langmod.BCLABEL22 }}','{{  langmod.BCLABEL12 }}','error',false,false,'5000',true);
                        $("#btnacition"+row).hide();
                        $("#btndole"+row).show();
                    }
                    return false;
                }
            });
        }else{
            noti_bubble('{{ langmod.BCLABEL21 }}','{{  langmod.BCLABEL12 }}','error',false,false,'5000',true);
            return false;
        }
    }
    return false;
}
function alertdeletefilemanager(st){
    if(st==0){
        $("#alert-delete-filemanager").hide('blind');
        return false;
    }else{
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=addons&acc=filemanager&op=delete",
            complete: function(datos){
                window.location.href="/{{users}}/?module=addons&acc=filemanager";
                return false;
            }
        });
    }
    return false;
}
function deletedatabasepg(st,db){
    if(st==0){
        var btsfooter='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.PGNO }}</button><button type="button" class="btn btn-primary" id="btndgpgdel" onclick="return deletedatabasepg(1,\''+db+'\')">{{ langmod.PGYES }}</button>';
        var btsheader='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only"></span></button><h4 class="modal-title"><strong>{{langmod.PGWARNING}}</strong></h4><small class="font-bold"> {{langmod.PGDELEBASEDATE}} </small>';
        $("#deletemodal .modal-footer").html(btsfooter);
        $("#deletemodal .modal-header").html(btsheader);
        $("#deletemodal .modal-body").html('<p class="text-center"><strong>'+db+'</strong></p>');
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $("#alerdelete").hide('blind');
        $("#alerdelete").html('');
        btnporcess('off','btndgpgdel','{{ langmod.PGLABEL1 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=postgresql_manager&acc=deletedatabase",
            data:"database="+db,
            complete: function(datos){
                if(datos.responseText=='OK'){
                    noti_bubble('{{langmod.PGUMYQLDEL}}','{{langmod.PGSUCCT}}','success',false,false,'3000',true);
                    btnporcess('on','btndgpgdel','{{ langmod.DBYES }}');
                    refrestablepg();
                    $("#deletemodal").hide();
                }
                if((datos.responseText=='bdpg01')||(datos.responseText=='bdpg03')){
                    btnporcess('on','btndgpgdel','{{ langmod.DBYES }}');
                    noti_bubble('{{langmod.PGUMYQLDEL}}','{{langmod.PGSUCCT}}','error',false,false,'3000',true);
                }
                return false;
            }
        });
        return false;
    }
    return false;
}
function deleteuserdbpg(st, db,user){
    if(st==0){
        var btsfooter='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.PGNO }}</button><button type="button" class="btn btn-primary" id="btndeluserbdpg" onclick="return deleteuserdbpg(1,\''+db+'\',\''+user+'\')">{{ langmod.PGYES }}</button>';
        var btsheader='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only"></span></button><h4 class="modal-title"><strong>{{langmod.PGWARNING}}</strong></h4><small class="font-bold"> {{langmod.PGDELETEUSER}} </small>';
        $("#deletemodal .modal-footer").html(btsfooter);
        $("#deletemodal .modal-header").html(btsheader);
        $("#deletemodal .modal-body").html('<p class="text-center"><strong>'+user+'</strong></p>');
        $("#deletemodal").modal('toggle');
        return false;
    }
    if(st==1){
        $("#alerdelete").hide('blind');
        $("#alerdelete").html('');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        btnporcess('off','btndeluserbdpg','{{ langmod.PGLABEL1 }}');
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=postgresql_manager&acc=deleteuserdb",
            data:"user="+user+"&db="+db,
            complete: function(datos){
                $("#deletemodal").modal('toggle');
                refrestablepg();
                noti_bubble('{{langmod.PGUSSQLDEL}}','{{langmod.PGSUCCT}}','success',false,false,'3000',true);
                btnporcess('on','btndeluserbdpg','{{ langmod.DBYES }}');
                return false;
            }
        });
        return false;
    }
    return false;
}
function refrestablepg(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=postgresql_manager&acc=refrestable",
        complete: function(datos){
            $("#trtable").html(datos.responseText);
        }
    });
}
function newuserpg(db){
    $("#titlebdpg").html(db);
    $("#dbasehidenpg").val(db);
    $("#modal-newuserpg").modal('toggle');
    return false;
}
function btnnewnewuserpg(){
    var sw=0;
    if(($("#newuserpg").val()=='')||($("#newpass1pg").val()=='')||($("#newpass2pg").val()=='')){ var msj='{{langmod.PGERROR4}}'; sw=1;}
    if($("#newpass1pg").val()!=$("#newpass2pg").val()){ var msj='{{langmod.PGERROR3}}'; sw=1;}
    if(sw==1){
        noti_bubble(msj,'{{langmod.PGERROR}}','error',false,false,'3000',true);
        return false;
    }else{
        btnporcess('off','btn-newnewuserpg','{{ langmod.PGLABEL1 }}');
        var pass=Base64.encode($("#newpass1pg").val());
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=postgresql_manager&acc=newnewuser",
            data: "userdb="+$("#newuserpg").val()+"&pass="+pass+"&dbase="+$("#dbasehidenpg").val(),
            complete: function(datos){
                refrestablepg();
                $("#modal-newuserpg").modal('toggle');
                if(datos.responseText=='OK'){
                    $("#newuserpg").val('');
                    $("#newpass1pg").val('');
                    $("#newpass2pg").val('');
                    btnporcess('on','btn-newnewuserpg','{{ langmod.PGCREATEUSER }}');
                    $("#modal-newuserpg").modal('toggle');
                    noti_bubble('{{langmod.PGSUCCT}}','{{langmod.PGUSSQLOK}}','success',false,false,'3000',true);
                }else if(datos.responseText=='1'){
                    //$("#alertnewdb2pg").html('<div class="alert alert-danger fade in"><i class="glyphicon glyphicon-ban-circle alert-icon "></i>{{langmod.PGERROR1}}</div>');
                    //$("#alertnewdb2pg").show('blind');
                    noti_bubble('{{langmod.PGERROR1}}','','error',false,false,'3000',true);
                }else if(datos.responseText==2){
                    //$("#alertnewdb2pg").html('<div class="alert alert-danger fade in"><i class="glyphicon glyphicon-ban-circle alert-icon "></i>{{langmod.PGERROR2}}</div>');
                    //$("#alertnewdb2pg").show('blind');
                    noti_bubble('{{langmod.PGERROR2}}','','error',false,false,'3000',true);
                }
                return false;
            }
        });
        return false;
    }
}
function track_errors(){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=crontab&acc=track_errors",
        complete: function(datos){
            //alert(datos.responseText);
            if(datos.responseText!=''){
                $("#alerterrorcron").show('blind');
                $("#edibtncron"+datos.responseText).addClass('disabled');
                $("#edibtncron"+datos.responseText).attr('disabled',true);
                $("#tr"+datos.responseText).css('background-color','#f2dede');
                noti_bubble('{{langmod.CRLABEL8}}','{{langmod.ERROR1}}','error',false,false,'3000',true);
                return false;
            }else{
                $("#alerterrorcron").hide();
            }
        }
    });
}
function btnadddomain(){
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.DOMLABLE3 }}</span></button><h4 class="modal-title">{{ langmod.DBNTADD }}</h4>';
    var bodyvar='<div class="row"><div class="col-sm-3"><b>{{ langmod.DDOMAIN }}:</b></div><div class="col-sm-5"><input type="text" class="form-control" style="padding:3px 0px;" id="newdomain" onkeyup="return newdomainkeyup()"></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.DPATH }}:</b> /home/{{ users }}</div><div class="col-sm-5"><input type="text" class="form-control" style="padding:3px 0px;" id="pathdomain" value="/public_html/"></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.DONLABEL8 }}</b></div><div class="col-sm-5"><input type="checkbox" class="form-controla" style="padding:3px 0px;" id="autossl"></div></div><p class="text-center"  style="padding-top: 15px"><b>{{ langmod.DONLABEL7 }}</b></p>';
    var btnvar='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.DCANDELDOMAIN }}</button> <button type="button" class="btn btn-primary" onclick="return btn_save_domain()" id="btn_save_domain">{{ langmod.DBNTADD }}</button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(btnvar);
    $("#addmodal").modal('toggle');
}
function btnnewdbonlypg(){
    btnporcess('off','btn-newdbonlypg','{{ langmod.PGLABEL1 }}');
    if($("#newdbpg").val()!=''){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=postgresql_manager&acc=newbdonly",
            data: "datebase="+$("#newdbpg").val(),
            complete: function(datos){
                if(datos.responseText=='OK'){
                    noti_bubble('{{langmod.PGMYSQLOK}}','{{langmod.PGSUCCT}}','success',false,false,'3000',true);
                    refrestablepg();
                    btnporcess('on','btn-newdbonlypg','{{ langmod.PGCREATEMODAL }}');
                    $("#addmodal").modal('toggle');
                }else if((datos.responseText=='bdpg01')||(datos.responseText=='bdpg03')){
                    $("#addmodal").modal('toggle');
                    noti_bubble('{{langmod.PGERROR15}}','{{langmod.PGERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newdbonlypg','{{ langmod.PGCREATEMODAL }}');
                }else if(datos.responseText=='bdpg02'){
                    $("#addmodal").modal('toggle');
                    noti_bubble('{{langmod.PGERROR16}}','{{langmod.PGERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newdbonlypg','{{ langmod.PGCREATEMODAL }}');
                }
                return false;
            }
        });
    }else{
        noti_bubble('{{langmod.PGERROR}}','{{langmod.PGERROR17}}','error',false,false,'3000',true);
        btnporcess('on','btn-newdbonlypg','{{ langmod.PGCREATEMODAL }}');
        return false;
    }
}
function logon(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=logon",
        complete: function(datos){
            window.location = '/login/?acc=logon';
            return false;
        }
    });
}
function validatetypephp(){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpini_editor&acc=validatetypephp",
        data: "domain="+$("#domainini").val(),
        complete: function(datos){
            var stn=datos.responseText;
            var trz=stn.split('||');
            if(trz[1]=='php-fpm'){var filename='.user.ini';}else{var filename='php.ini';}
            $("#hfilename").val(trz[2]+filename);
            $("#pathini").html('<h5>'+trz[2]+filename+'</h5>');
            listregphpini();
            //$("#conteditphp").html(trz[3]);
            return false;
        }
    });
    return false;
}
function insertText(data){
    var cm = $(".CodeMirror")[0].CodeMirror;
    var doc = cm.getDoc();
    var cursor = doc.getCursor(); // gets the line number in the cursor position
    var line = doc.getLine(cursor.line); // get the line contents
    var pos = {
        line: cursor.line
    };
    if (line.length === 0) {
        // check if the line is empty
        // add the data
        doc.replaceRange(data, pos);
    } else {
        // add a new line and the data
        doc.replaceRange("\n" + data, pos);
    }
}
function statistic(){
    $('#filename').load("/home/luna/stats/goaccess/html/stats.html");
}
function btnaddsubdomain(){
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SUBDOMLABLE3 }}</span></button><h4 class="modal-title">{{ langmod.SDBNTADD }}</h4>';
    var bodyvar='<div class="row"><div class="col-sm-3"><b>{{ langmod.SDDOMAIN }}:</b></div><div class="col-sm-3"><input type="text" class="form-control" style="padding:3px 0px;" id="subdomain" onkeyup="return subdomainkeyup()"></div><div class="col-sm-5"><select id="domains" class="form-control" >{% for dsel in mod.seldomain %}<option value="{{ dsel.domain }}">{{ dsel.domain }}</option>{% endfor %}</select></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.SDPATH }}:</b> /home/{{ users }}</div><div class="col-sm-5"><input type="text" class="form-control" style="padding:3px 0px;" id="pathdomain" value="/public_html/"></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.SUBDOMLABEL8 }}:</b></div><div class="col-sm-5"><input type="checkbox" class="form-control2" style="padding:3px 0px;" id="autossl"></div></div><p class="text-center"  style="padding-top: 15px"><b>{{ langmod.SUBDOMLABEL7 }}</b></p>';
    var btnvar='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.SUBDOMLABLE3 }}</button> <button type="button" class="btn btn-primary" onclick="return btn_save_subdomain()" id="btnsavesubdomain">{{ langmod.SDBNTADD }}</div></button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(btnvar);
    $("#addmodal").modal('toggle');
}
function changephp(){
    if($("#phptypehidden").val()=='php-cgi'){
        $("#exploret").hide('blind');
        $("#labeltypephp").html('php-fpm');
        $("#phptypehidden").val('php-fpm');
        $("#updateversionfpm").show();
    }else{
        $("#exploret").show('blind');
        $("#labeltypephp").html('php-cgi');
        $("#phptypehidden").val('php-cgi');
        $("#updateversionfpm").hide();
    }
    $("#contverphp").html('<i class="fa fa-spinner fa-spin fa-2x"></i>');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=changephp",
        data:"domain="+$("#domainphp").val()+"&typephp="+$("#phptypehidden").val()+"&path="+$("#pathselect").val(),
        complete: function(datos){
            var obj = jQuery.parseJSON( datos.responseText );
            $("#contverphp").html(obj.contverphp);
            $("#exploret").html('<p><strong>{{ langmod.SPHPLABEL11 }}</strong></p><div class="row"><div class="col-lg-10"><input type="text" class="form-control" style="padding-bottom: 15px" id="pathselect" value="'+obj.path+'"></div><div class="col-lg-2"><button class="btn btn-success btn-xs" id="btnapplycgi" onclick="return btnapplycgi()">{{ langmod.SPHPLABEL12 }}</button></div></div></div><div class="ex1" style="overflow: auto; height: 200px; padding-left: 20px;margin-top: 20px">'+obj.exploret+'</div><hr><div style="padding-left: 20px;margin-top: 40px"><p ><i class="fa fa-folder" style="color:#F8C54D"></i> {{ langmod.SPHPLABEL13 }}</p><p><i class="fa fa-folder" style="color:#189FF8"></i>  {{ langmod.SPHPLABEL14 }}</p><p><i class="fa fa-info"></i> {{ langmod.SPHPLABEL15 }}</p><p><i class="fa  fa-info-circle"></i> {{ langmod.SPHPLABEL16 }}</p></div>');
            if($("#phptypehidden").val()=='php-fpm'){ $("#typephp").attr('checked',true); $("#exploret").hide(); }else{ $("#typephp").attr('checked',false); $("#exploret").show(); }
        }
    });
}
function changephp2(){
    //if($("#phptypehidden").val()=='php-fpm'){ $("#modalselectorphp .modal-body").html('{{ langmod.SPHPLABEL8 }}'); }else{ $("#modalselectorphp .modal-body").html('{{ langmod.SPHPLABEL9 }}'); }
    //$("#modalselectorphp").modal('toggle');
    //return false;
    alert($("#phptypehidden").val());
    if($("#phptypehidden").val()=='php-fpm'){
        $("#labeltypephp").html('php-cgi');
        $("#phptypehidden").val('php-cgi');
        $("#updateversionfpm").hide();
    }else{
        $("#exploret").hide();
        $("#labeltypephp").html('php-fpm');
        $("#phptypehidden").val('php-fpm');
        $("#updateversionfpm").show();
    } //php-cgi  //labeltypephp
    $("#contverphp").html('<i class="fa fa-spinner fa-spin fa-2x"></i>');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=changephp",
        data:"domain="+$("#domainphp").val()+"&typephp="+$("#phptypehidden").val()+"&path="+$("#pathselect").val(),
        complete: function(datos){
            var obj = jQuery.parseJSON( datos.responseText );
            $("#contverphp").html(obj.contverphp);
            $("#exploret").html('<p><strong>{{ langmod.SPHPLABEL11 }}</strong></p><div class="row"><div class="col-lg-10"><input type="text" class="form-control" style="padding-bottom: 15px" id="pathselect" value="'+obj.path+'"></div><div class="col-lg-2"><button class="btn btn-success btn-xs" id="btnapplycgi" onclick="return btnapplycgi()">{{ langmod.SPHPLABEL12 }}</button></div></div></div><div class="ex1" style="overflow: auto; height: 200px; padding-left: 20px;margin-top: 20px">'+obj.exploret+'</div><hr><div style="padding-left: 20px;margin-top: 40px"><p ><i class="fa fa-folder" style="color:#F8C54D"></i> {{ langmod.SPHPLABEL13 }}</p><p><i class="fa fa-folder" style="color:#189FF8"></i>  {{ langmod.SPHPLABEL14 }}</p><p><i class="fa fa-info"></i> {{ langmod.SPHPLABEL15 }}</p><p><i class="fa  fa-info-circle"></i> {{ langmod.SPHPLABEL16 }}</p></div>');
            if($("#phptypehidden").val()=='php-fpm'){
                $("#typephp").attr('checked',true);
                $("#exploret").hide();
            }else{
                $("#typephp").attr('checked',false);
                $("#exploret").show();
            }
        }
    });
    //return false;
}
function opendirdiv(div,path){
    $("#folder"+div).removeClass('fa-folder fa-spin');
    $("#folder"+div).addClass(' fa-spinner  fa-spin');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=opendirdiv",
        data:"path="+path+"&domain="+$("#domainphp").val(),
        complete: function(datos){
            //console.log(datos.responseText);
            if(datos.responseText!='none'){ $("#"+div).html(datos.responseText); }else{ $("#"+div).html('{{ langmod.SPHPLABEL10 }}'); }
            $("#"+div).toggle('blind');
            $("#folder"+div).removeClass(' fa-spinner  fa-spin');
            $("#folder"+div).addClass('fa-folder');
        }
    });
}
function markpath(path){
    //$("#pathselect").html('<strong>'+Base64.decode(path)+'</strong>');
    $("#pathselect").val(Base64.decode(path));
    return false;
}
function btnapplycgi(){
    $("#btnapplycgi").addClass('disabled');
    $("#btnapplycgi").attr('disabled',true);
    $("#btnapplycgi").html('<i class="fa fa-spinner fa-spin"></i> {{ langmod.SPHPLABEL12 }}');
    var verphp =$('input:radio[name=php-cgi]:checked').val();
    if(verphp == undefined){
        noti_bubble('{{langmod.SPHPLABEL19}}','{{langmod.SPHPLABEL17}}','error',false,false,'3000',true);
        $("#btnapplycgi").removeClass('disabled');
        $("#btnapplycgi").attr('disabled',false);
        $("#btnapplycgi").html('{{ langmod.SPHPLABEL12 }}');
        return false;
    }
    if($("#pathselect").val()==''){
        noti_bubble('{{langmod.SPHPLABEL18}}','{{langmod.SPHPLABEL17}}','error',false,false,'3000',true);
        $("#btnapplycgi").removeClass('disabled');
        $("#btnapplycgi").attr('disabled',false);
        $("#btnapplycgi").html('{{ langmod.SPHPLABEL12 }}');
        return false;
    }
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=btnapplycgi",
        data:"domain="+$("#domainphp").val()+"&ver="+verphp+"&path="+$("#pathselect").val(),
        complete: function(datos){
            console.log(datos.responseText);
            $("#btnapplycgi").removeClass('disabled');
            $("#btnapplycgi").attr('disabled',false);
            $("#btnapplycgi").html('{{ langmod.SPHPLABEL12 }}');
            if(datos.responseText==1){
                noti_bubble('{{langmod.SPHPLABEL4}}','{{langmod.SPHPLABEL3}}','success',false,false,'3000',true);
            }else{
                noti_bubble('{{langmod.SPHPLABEL20}}','{{langmod.SPHPLABEL17}}','error',false,false,'6000',true);
            }
            return false;
        }
    });

}
$("#domainphp").change(function(){
    $("#contverphp").html('<i class="fa fa-spinner fa-spin fa-2x"></i>');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=changedomainphp",
        data:"domain="+$("#domainphp").val(),
        complete: function(datos){
            //alert(datos.responseText);
            var obj = jQuery.parseJSON( datos.responseText );
            //$("#phptypehidden").val(obj.php);
            //$("#labeltypephp").html(obj.php);
            //alert(datos.responseText);
            //alert(obj.php);
            changephp();
            return false;
        }
    });
});

$("#newdb").keyup(function(){
    var valuename=$("#newdb").val();
    var strclear=valuename.replace(/[^a-z0-9\s]/gi, '');
    $("#newdb").val(strclear);
});
$("#bdname").keyup(function(){
    var valuename=$("#bdname").val();
    var strclear=valuename.replace(/[^a-z0-9\s]/gi, '');
    $("#bdname").val(strclear);
});
$("#updateversionfpm").click(function(){
    $("#updateversionfpm").html('<i class="fa fa-spinner fa-spin"></i>  {{langmod.SPHPLABEL2}}');
    $("#updateversionfpm").attr('disabled',true);
    $("#updateversionfpm").addClass('disabled');
    var verphp= $('input:radio[name=php-fpm]:checked').val();
    var domain= $("#domainphp").val();
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=updatephpfpm",
        data:"domain="+domain+"&ver="+verphp,
        complete: function(datos){
            $("#updateversionfpm").html('{{langmod.SPHPLABEL2}}');
            $("#updateversionfpm").attr('disabled',false);
            $("#updateversionfpm").removeClass('disabled');
            var obj = jQuery.parseJSON( datos.responseText );
            $("#verphpdiv").html(obj.verphp);
            noti_bubble('{{langmod.SPHPLABEL4}}','{{langmod.SPHPLABEL3}}','success',false,false,'3000',true);
            return false;
        }
    });
});
$("#btn-changephp").click(function(){
    //$("#modalselectorphp").modal('toggle');
    if($("#phptypehidden").val()=='php-fpm'){
        $("#labeltypephp").html('php-cgi');
        $("#phptypehidden").val('php-cgi');
        $("#updateversionfpm").hide();
    }else{
        $("#labeltypephp").html('php-fpm');
        $("#phptypehidden").val('php-fpm');
        $("#updateversionfpm").show();
    } //php-cgi  //labeltypephp
    $("#contverphp").html('<i class="fa fa-spinner fa-spin fa-2x"></i>');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpselector&acc=changephp",
        data:"domain="+$("#domainphp").val()+"&typephp="+$("#phptypehidden").val(),
        complete: function(datos){
            var obj = jQuery.parseJSON( datos.responseText );
            $("#contverphp").html(obj.contverphp);
            $("#exploret").html('<p><strong>{{ langmod.SPHPLABEL11 }}</strong></p><div class="row"><div class="col-lg-10"><input type="text" class="form-control" style="padding-bottom: 15px" id="pathselect" value="'+obj.path+'"></div><div class="col-lg-2"><button class="btn btn-success btn-xs" id="btnapplycgi" onclick="return btnapplycgi()">{{ langmod.SPHPLABEL12 }}</button></div></div></div><div class="ex1" style="overflow: auto; height: 200px; padding-left: 20px;margin-top: 20px">'+obj.exploret+'</div><hr><div style="padding-left: 20px;margin-top: 40px"><p ><i class="fa fa-folder" style="color:#F8C54D"></i> {{ langmod.SPHPLABEL13 }}</p><p><i class="fa fa-folder" style="color:#189FF8"></i>  {{ langmod.SPHPLABEL14 }}</p><p><i class="fa fa-info"></i> {{ langmod.SPHPLABEL15 }}</p><p><i class="fa  fa-info-circle"></i> {{ langmod.SPHPLABEL16 }}</p></div>');
            if($("#phptypehidden").val()=='php-fpm'){ $("#typephp").attr('checked',true); $("#exploret").hide(); }else{ $("#typephp").attr('checked',false); $("#exploret").show();}
        }
    });
    return false;
});


$("#domainini").change(function(){
    validatetypephp();
});
$("#btnretoreuser").click(function(){
    if($("#selecttypebackup").val()==''){
        noti_bubble('{{langmod.BCLABEL11}}','{{langmod.BCLABEL12}}','error',false,false,'3000',true);
        return false;
    }
    var restaure ='';
    var homeuser =0;
    var mysqluser =0;
    var mailuser =0;
    var ftp =0;
    var named =0;
    $("input:checkbox:checked").each(function() {
        restaure=$(this).val();
        if($(this).val()=='home'){ homeuser = 1;}
        if($(this).val()=='mysql'){ mysqluser = 1;}
        if($(this).val()=='mail'){ mailuser = 1;}
        if($(this).val()=='ftp'){ ftp = 1;}
        if($(this).val()=='named'){ named = 1;}
    });
    if(restaure==''){
        noti_bubble('{{langmod.BCLABEL13}}','{{langmod.BCLABEL12}}','error',false,false,'3000',true);
        return false;
    }
    var selecttypebackup = $("#selecttypebackup").val();
    $("#btnretoreuser").attr('disabled',true);
    $("#btnretoreuser").addClass('disabled');
    $("#btnretoreuser").html('<i class="fa fa-spinner fa-spin"></i> {{ langmod.BCLABEL14 }}');
    $("#btnretoreuser").removeClass('btn-success');
    $("#btnretoreuser").addClass('btn-primary');

    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=backups&acc=restoreuserbackup",
        data:"homeuser="+homeuser+"&mysqluser="+mysqluser+"&mailuser="+mailuser+"&selecttypebackup="+selecttypebackup+"&ftp="+ftp+"&named="+named,
        complete: function(datos){
            //alert(datos.responseText);
            if(datos.responseText=='OK'){
                noti_bubble('{{langmod.BCLABEL15}}','{{langmod.BCSUCCT}}','success',false,false,'3000',true);
            }else{
                noti_bubble('{{langmod.BCLABEL16}}','{{langmod.BCLABEL12}}','error',false,false,'3000',true);
            }
            $("#btnretoreuser").attr('disabled',false);
            $("#btnretoreuser").removeClass('disabled');
            $("#btnretoreuser").html('{{ langmod.BTNRESTORE }}');
            $("#btnretoreuser").removeClass('btn-primary');
            $("#btnretoreuser").addClass('btn-success');
            return false;
        }
    });

});
$("#storage").click(function(){
    $("#contspace").toggle('blind');
    $("#divstorage").show('blind');
    if($("#sw").hasClass('fa-sort-desc')){
        $("#sw").removeClass('fa-sort-desc');
        $("#sw").addClass('fa-sort-asc');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?acc=disk_space",
            complete: function(datos){
                //alert(datos.responseText);
                var str=datos.responseText;
                var trozo=str.split('||');
                var backup = trozo[0];
                var home = trozo[1];
                var mysql = Math.round(trozo[2]/1024);
                var email = Math.round(trozo[3]/10240);
                var quota = Math.round(trozo[4]);
                //var totalhost=home+mysql+email+backup;
                var totalhost=Math.round(trozo[5]);
                var homediv=Math.round((100/quota)*home);
                var mysqldiv=Math.round((100/quota)*mysql);
                var emaildiv=Math.round((100/quota)*email);
                var backupdiv=Math.round((100/quota)*backup);

                $("#bp-backup").css({'width':''+backupdiv+'%'});
                $("#pullbackup").html(Math.round(backupdiv)+'%');
                $("#stat-backup").html(backup+' MB / '+quota+' MB');
                if(backupdiv<50) { $("#bp-backup").addClass('progress-bar-success'); }else if((backupdiv>=50) || (backupdiv<=75)) { $("#bp-backup").addClass('progress-bar-warning'); }else{ $("#bp-backup").addClass('progress-bar-danger'); }

                $("#bp-mysql").css({'width':''+mysqldiv+'%'});
                if(mysqldiv>70){$("#bp-mysql").css({'background-color':'#F48C46'});}
                $("#pullmysql").html(Math.round(mysqldiv)+'%');
                $("#stat-mysql").html(mysql+' MB / '+quota+' MB');
                if(mysqldiv<50) { $("#bp-mysql").addClass('progress-bar-success'); }else if((mysqldiv>=50) || (mysqldiv<=75)) { $("#bp-mysql").addClass('progress-bar-warning'); }else{ $("#bp-mysql").addClass('progress-bar-danger'); }

                $("#bp-email").css({'width':''+emaildiv+'%'});
                if(emaildiv>70){$("#bp-email").css({'background-color':'#F48C46'});}
                $("#pullemail").html(Math.round(emaildiv)+'%');
                $("#stat-email").html(email+' MB / '+quota+' MB');
                if(emaildiv<50) { $("#bp-email").addClass('progress-bar-success'); }else if((emaildiv>=50) || (emaildiv<=75)) { $("#bp-email").addClass('progress-bar-warning'); }else{ $("#bp-email").addClass('progress-bar-danger'); }

                $("#bp-home").css({'width':''+homediv+'%'});
                if(homediv>70){$("#bp-home").css({'background-color':'#F48C46'});}
                $("#pullhome").html(Math.round(homediv)+'%');
                $("#stat-home").html(home+' MB / '+quota+' MB');
                return false;
            }
        });
    }else{
        $("#sw").addClass('fa-sort-desc');
        $("#sw").removeClass('fa-sort-asc');
        $("#contspace").toggle('blind');
    }
    return false;
});
$("#domainsel").change(function (){
    $("#table3").hide('blind');
    $("#btn-test").hide();
    var domain=$("#domainsel").val();
    if($("#domainsel").val()!=''){
        $("#typyrecords").attr('disabled', false);
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=dns_zone_editor&acc=paserrecord",
            data:"domain="+domain,
            complete: function(datos){
                //alert(datos.responseText);
                $("#trnew").html(datos.responseText);
                $("#table3").show('blind');
                $("#btnaddreg").show();
                //$("#uladdreg").show();
                return false;
            }
        });
    }else{
        $("#typyrecords").attr('disabled', true);
        $("#table3").hide('blind');
        $("#btn-test").hide();
        $("#aipv4").hide();
        $("#mx").hide();
        $("#txt").hide();
        $("#btnaddreg").hide();
        //$("#uladdreg").hide();
    }
    return false;
});
$("#btn-newnewuser").click(function (){
    var sw=0;
    if(($("#newuser").val()=='')||($("#newpass1").val()=='')||($("#newpass2").val()=='')){ var msj='{{langmod.DBERROR4}}'; sw=1;}
    if($("#newpass1").val()!=$("#newpass2").val()){ var msj='{{langmod.DBERROR3}}'; sw=1;}
    if(sw==1){
        noti_bubble('{{langmod.DBERROR4}}','{{langmod.DBERROR}}','error',false,false,'4000',true);

        return false;
    }else{
        var pass=Base64.encode($("#newpass1").val());
        btnporcess('off','btn-newnewuser','{{ langmod.DBLABEL4 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mysql_manager&acc=newnewuser",
            data: "userdb="+$("#newuser").val()+"&pass="+pass+"&host="+$("#newhost").val()+"&dbase="+$("#dbasehiden").val(),
            complete: function(datos){
                if(datos.responseText=='OK'){
                    $("#newuser").val('');
                    $("#newpass1").val('');
                    $("#newpass1").val('');
                    $("#modal-newusermysql").modal('hide');
                    noti_bubble('{{langmod.DBSUCCT}}','{{langmod.DMUSSQLOK}}','success',false,false,'3000',true);
                    refrestable();
                    btnporcess('on','btn-newnewuser','{{ langmod.DBCREATEUSER }}');
                }else if(datos.responseText=='1'){
                    noti_bubble('{{langmod.DBERROR1}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newnewuser','{{ langmod.DBCREATEUSER }}');
                }else if(datos.responseText==2){
                    noti_bubble('{{langmod.DBERROR2}}','{{langmod.DBERROR}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newnewuser','{{ langmod.DBCREATEUSER }}');
                }
                return false;
            }
        });
        return false;
    }
});
$("#btn_cancel_ftp").click(function (){
    $("#modal-addfaccountftp").modal('hide');
    return false;
});
$("#btn_save_ftp").click(function (){
    btnporcess('off','btn_save_ftp','{{ langmod.FTPLABEL6 }}');
    var passlength=$("#ftppass1").val();
    passlength=passlength.length;
    $("#alertftp").hide('blind');
    if($("#loginftp").val()=='' || $("#directoryftp").val()=='' || $("#ftppass1").val()=='' || $("#ftppass2").val()==''){
        noti_bubble('{{langmod.FTPREQUERIDATE}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
        btnporcess('on','btn_save_ftp','{{ langmod.ADDFTPACCOUNT }}');
        return false;
    }else if($("#ftppass1").val()!=$("#ftppass2").val()){
        noti_bubble('{{langmod.PASSDIF}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
        btnporcess('on','btn_save_ftp','{{ langmod.ADDFTPACCOUNT }}');
        return false;
    }else if(passlength <=6){
        noti_bubble('{{langmod.FTPSECUREPASS}}','{{langmod.ERROR1}}','success',true,false,'3000',true);
        btnporcess('on','btn_save_ftp','{{ langmod.ADDFTPACCOUNT }}');
        return false;
    }else{
        var pass=Base64.encode($("#ftppass1").val());
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=ftp_accounts&acc=btn_save_ftp",
            data: "login="+$("#loginftp").val()+"&dir="+$("#directoryftp").val()+"&pass="+pass+"&domain="+$("#domain").val(),
            complete: function(datos){
                if(datos.responseText=='Ok'){
                    $("#loginftp").val('');
                    $("#directoryftp").val('/public_html/');
                    $("#directoryftp").val('/public_html/');

                    ftprefres($("#loginftp").val()+'@'+$("#domain").val(),$("#domain").val());
                    refrespanelnew('ftp_accounts');
                    noti_bubble('{{langmod.FTPCREATE}}','{{langmod.SUCCESSFUL}}','success',true,false,'3000',true);
                    btnporcess('on','btn_save_ftp','{{ langmod.ADDFTPACCOUNT }}');
                    $("#modal-addfaccountftp").modal('hide');
                }
                if(datos.responseText=='Error'){
                    noti_bubble('{{langmod.FTPERRORADD}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
                    btnporcess('on','btn_save_ftp','{{ langmod.ADDFTPACCOUNT }}');
                }
                return false;
            }
        });
    }
});
$("#regaddnew").click(function () {
    $("#addnew_tex").val('');
    $("#addnew_tex").toggle('blind');
    $("#addnew_sel").toggle('blind');
    return false;
});
$("#addphpini").click(function () {
    $("#addphpinieditor").modal('toggle');
    return false;
});
$("#btn_update_editphpini").click(function () {
    $("#btn_update_editphpini").html('<i class="fa fa-spinner  fa-spin"></i>&nbsp;{{ langmod.PHPLABEL9 }}');
    var arr=$("#valuehidden").val();
    var resp=[];
    arr=arr.split(',');
    var fin=((arr.length)-1);
    for(i=0;i<fin;i++){
        resp.push(encodeURIComponent($("#"+arr[i]).val()));
    }
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpini_editor&acc=update",
        data:"value="+resp+"&title="+arr+"&file="+$("#hfilename").val(),
        complete: function(datos){
            if(datos.responseText!=0){
                noti_bubble('{{langmod.UPDATEREG}}','{{langmod.PHPEXIT}}','success',true,false,'3000',true);
            }else{
                noti_bubble('{{langmod.ERROR1}}','{{langmod.LABELVALUE}}','error',true,false,'3000',true);
            }
            $("#btn_update_editphpini").html('&nbsp;{{langmod.BTN_UPDATE}}');
            return false;
        }
    });
});
$(".logon").click(function () {
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=logon",
        complete: function(datos){
            window.location = '/login/?acc=logon';
            return false;
        }
    });
});
$('#btn-delete-cron').on('click', function(){
    btnporcess('off','btn-delete-cron','{{ langmod.CRLABEL10 }}');
    var line =$("#idhidencron").val();
    $('#ibox1').children('.ibox-content').toggleClass('sk-loading');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=crontab&acc=deletecron",
        data:"line="+line,
        complete: function(datos){
            $('#ibox1').children('.ibox-content').toggleClass('sk-loading');
            refrescron();
            $("#descron").html('');
            $("#idhidencron").val('');
            btnporcess('on','btn-delete-cron','{{ langmod.CRYES }}');
            $("#myModal2").modal('toggle');
            noti_bubble('{{ langmod.CRLABEL4 }}','{{ langmod.CRLABEL5 }}','success',true,false,'3000',true);
            return false;
        }
    });
});
$('#litab1').on('click', function(){
    $("#litab1").addClass('active');
    $("#litab2").removeClass('active');
    $("#litab3").removeClass('active');
    $("#tab-1").addClass('active');
    $("#tab-2").removeClass('active');
    $("#tab-3").removeClass('active');
});
$('#litab2').on('click', function(){
    $("#litab1").removeClass('active');
    $("#litab2").addClass('active');
    $("#litab3").removeClass('active');
    $("#tab-1").removeClass('active');
    $("#tab-2").addClass('active');
    $("#tab-3").removeClass('active');
});
$('#litab3').on('click', function(){
    $("#litab1").removeClass('active');
    $("#litab2").removeClass('active');
    $("#litab3").addClass('active');
    $("#tab-1").removeClass('active');
    $("#tab-2").removeClass('active');
    $("#tab-3").addClass('active');
});
$("#pass2").keyup(function() {
    if($("#pass2").val()==$("#pass1").val()){
        $("#btn-submit").show();
        newvalidpass($("#pass1").val(),$("#pass2").val());
    }else{
        $("#btn-submit").hide();
        newvalidpass($("#pass1").val(),$("#pass2").val());
    }
});
$("#btn-process-list-on").click(function(){
    $("#btn-process-list-on").hide();
    $("#btn-process-list-off").show();
    timer = setTimeout('processlist(1)', 4000);
});
$("#btn-process-list-off").click(function(){
    $("#btn-process-list-off").hide();
    $("#btn-process-list-on").show();
    clearTimeout(timer);
});
$("#btn_editphp_add").click(function () {
    if(($("#addnew_tex").val()=='')&&($("#addnew_sel").val()=='')){
        noti_bubble('{{langmod.LABELPHP}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
        return false;
    }else{
        if($("#addvalue").val()==''){
            noti_bubble('{{langmod.LABELPHP}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
            return false;
        }else{
            if($("#addnew_tex").val()!=''){var label=$("#addnew_tex").val();}else{var label=$("#addnew_sel").val();}
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=phpini_editor&acc=addlabelphpini",
                data:"label="+Base64.encode(label)+"&value="+Base64.encode($("#addvalue").val())+"&file="+$("#hfilename").val(),
                complete: function(datos){
                    var str=datos.responseText;
                    var res=str.split("||");
                    if(res[0]==1) {
                        listregphpini();
                        noti_bubble('{{langmod.EXIST}}','{{langmod.EXITO}}','success',true,false,'3000',true);
                        insertText(label+'='+$("#addvalue").val());
                        return false;
                    }else if(res[0]==2){
                        noti_bubble('{{langmod.LABELEXIST}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
                        return false;
                    }else{
                        noti_bubble('{{langmod.ERRORINI}}','{{langmod.ERROR1}}','error',true,false,'3000',true);
                        return false;
                    }
                    return false;
                }
            });
        }
    }
});
$("#btnsavenoti").click(function (){
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=notification_center&acc=save",
        data:"emailaccount="+$("#emailaccount").val(),
        complete: function(datos){
            noti_bubble('{{langmod.NSEXITALLCHENGE}}','{{langmod.NSACCSUCCESS}}','success',false,false,'3000',false);
            return false;
        }
    });
});
$("#notiemail").click(function (){
    if( $("#notiemail").attr('checked') ) {
        $("#contdivemail1").show();
        $("#contdivemail2").show();
    }else{
        $("#contdivemail1").hide();
        $("#contdivemail2").hide();
    }
});
$("#notiview").click(function (){
    if( $("#notiview").attr('checked') ) {
        $("#notiview-h").val(1);
        noti_bubble('{{langmod.NCALERTDEMO}}','{{langmod.NCALERTEERROR}}','warning',true,false,'5000',true);
    }else{
        $("#notiview-h").val(0);
    }
});
$(".files_system_lock").click(function(){
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=files_system_lock&acc=status",
        //data:"typescan="+avtype,
        complete: function(datos){
            if(datos.responseText==1){
                var btn='<div id="contfl"><a class="btn btn-warning btn-rounded btn-block" href="#" onclick="return changstpublic(1,1)"><i class="fa fa-lock"></i> {{langene.FSL_BTN_LOCKED}}</a></div><br><p align="center">{{langene.FSL_DETAIL}}</p>';
            }else{
                var btn='<div id="contfl"><a class="btn btn-success btn-rounded btn-block" href="#" onclick="return changstpublic(0,1)"><i class="fa fa-unlock-alt"></i> {{langene.FSL_BTN_UNLOCKED}}</a></div><br><p align="center">{{langene.FSL_DETAIL}}</p>';
            }
            $("#modal-fsl .modal-body").html(btn);
            $("#modal-fsl").modal('toggle');
            return false;
        }
    });
});
$(".clam").click(function(){
    $("#antivirus-modalnew").modal();
    return false;
});
$("#btn-star-antivirus2").click(function(){
    var avtype=$('input:radio[name=avtype2]:checked').val();
    $("#btn-star-antivirus2").hide();
    $("#btn-star-antivirus_process2").show();
    $("#alerbtn_av2").html('');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=clam&acc=antivirus",
        data:"typescan="+avtype,
        complete: function(datos){
            //alert(datos.responseText);
            if(datos.responseText==11){
                var msj="{{langene.AVALERT1}}";
                var sw=1;
            }else if(datos.responseText==12){
                var msj="{{langene.AVALERT2}}";
                var sw=1;
            }else if(datos.responseText==31){
                var msj="{{langene.AVALERT3}}";
                var sw=1;
            }else{
                var msj=datos.responseText;
                $("#antivirus-modal .modal-body").html(datos.responseText);
                $("#antivirus-modalnew").modal('toggle');
                $("#antivirus-modal").modal();
                var sw=0;
            }
            $("#btn-star-antivirus_process2").hide();
            $("#btn-star-antivirus2").show();
            if(sw==1){
                $("#alerbtn_av2").html(msj);
                $("#alerbtn_av2").show();
            }
            return false;
        }
    });
});
$("#pass2ftp").keyup(function() {
    if($("#pass2ftp").val()==$("#pass1ftp").val()){
        $("#btn-submitftp").show();
        newvalidpassftp($("#pass1ftp").val(),$("#pass2ftp").val());
    }else{
        newvalidpassftp($("#pass1ftp").val(),$("#pass2ftp").val());
        $("#btn-submitftp").hide();
    }
});
$("#pass1ftp").keyup(function() {
    var color1=0;
    var color2=0;
    var color3=0;
    var color4=0;
    var classpar='';
    var msj='';
    // set password variable
    var pswd = $(this).val();
    //validate the length
    if(pswd.length<8){ color1=0;}else{ color1=1; msj=msj+' largo 1';  }
    //validate letter
    if(pswd.match(/[A-z]/gi)){color2=1; msj=msj+' letras 1'; }else{ color2=0;}
    //validate capital letter
    if(pswd.match(/[A-Z]/gi)){ msj=msj+' Mayusculas 1'; color3=1; } else { color3=0; }
    //validate number
    if (pswd.match(/[0-9]/gi)){color4=1; msj=msj+' Numeros 1';}else{  color4=0; }
    var sum=(color1+color2+color3+color4);
    newvalidpassftp($("#pass1ftp").val(),$("#pass2ftp").val());
    //alert(sum+' M:'+msj);
    if(sum==0){ classpar='progress-bar-danger';}
    if(sum==1){ classpar='progress-bar-warning';}
    if(sum==2){ classpar='progress-bar-danger';}
    if(sum==3){ classpar='progress-bar-info';}
    if(sum==4){ classpar='progress-bar-success';}
    var barra='<div class="progress-bar '+classpar+'" style="width: '+((pswd.length)*10)+'%;"></div>';
    $("#progresspassftp").html(barra);
});
$("#btn-submitftp").click(function (){
    $("#btn-submitftp").attr('disalbled',true);
    $("#btn-submitftp").addClass('disalbled');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=ftp_accounts&acc=changepassftp",
        data: "pass="+$("#pass1ftp").val()+"&hidenuserftp="+$("#hidenuserftp").val(),
        complete: function(datos){
            changepassftp($("#hidenuserftp").val());
            noti_bubble('{{langmod.SUCCESSFUL}}','{{langmod.FTPEXITPASS}}','success',false,false,'3000',true);

            $("#modal-changepassftp").modal('hide');
            $("#btn-submitftp").attr('disalbled',false);
            $("#btn-submitftp").removeClass('disalbled');
            return false;
        }
    });
    return false;
});
$("#btn-save-theme").click(function (){
    if( $("#formulario input[name='theme-save']:radio").is(':checked')) {
        var theme_new = $('input:radio[name=theme-save]:checked').val();
    }
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=changethemesave",
        data: "theme="+theme_new,
        complete: function(datos){
            //alert(datos.responseText);
            window.location.href=datos.responseText;
            return false;
        }
    });
    return false;
});
$("#btn_add_ftp").click(function () {
    $("#modal-addfaccountftp").modal('toggle');
    return false;
});
$("#btn-addautof").click(function (){
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.DOMLABLE3 }}</span></button><h4 class="modal-title">{{ langmod.ARBTNADD }}</h4>';
    var bodyvar='<div  style="display: block;" id="addautofdiv">';
    bodyvar+='<div class="row" style="margin-left: 15px;">';
    bodyvar+='<div class="col-lg-3">';
    bodyvar+='<input id="emailautof" class="form-control col-lg-12" value="" placeholder="{{ langmod.AEEMAIL2 }}">';
    bodyvar+='</div>';
    bodyvar+='<div class="col-sm-3">';
    bodyvar+='<select id="domainautof" class="form-control">';
    bodyvar+='<option value="">{{ langmod.ARCHOOD }}</option>';
    {% for email2 in mod.email2 %}
    bodyvar+='<option value="{{ email2.domain }}">@{{ email2.domain }}</option>';
    {% endfor %}
    bodyvar+='</select>';
    bodyvar+='</div>';
    bodyvar+='<div class="col-sm-6">';
    bodyvar+='<input id="subjectautof" class="form-control col-sm-12" value="{{ mod.rand }}" placeholder="{{ langmod.ARTHESUBJ }}">';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='<div class="row" style="margin-left: 15px; margin-top: 15px">';
    bodyvar+='<div class="col-sm-12">';
    bodyvar+='<textarea id="messajeautof" class="form-control" rows="6" placeholder="{{ langmod.ARMSJ1 }}"></textarea>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='<div class="row"  style="margin-left: 30px">';
    bodyvar+='<div class="toggle-custom">';
    //bodyvar+='<label class="toggle" data-on="ON" data-off="OFF">';
    bodyvar+='<input type="checkbox" id="sendonlydate" name="sendonlydate" onchange="return sendonlydate(0)" value="0">';
    //bodyvar+='<span class="button-checkbox"></span>';
    //bodyvar+='</label>';
    bodyvar+='<label for="sendonlydate">{{ langmod.ARRANGETIME }}</label>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='<form class="form-horizontal group-border stripped" role="form">';
    bodyvar+='<label class="col-lg-6 control-label text-center" for=""><b>{{ langmod.ARINITIO }}</b></label>';
    bodyvar+='<label class="col-lg-6 control-label text-center" for=""><b>{{ langmod.ARFIN }}</b></label>';
    bodyvar+='<div class="row" style="margin-left: 15px">';
    bodyvar+='<div class="col-lg-3">';
    bodyvar+='<div class="input-group">';
    bodyvar+='<span class="input-group-addon"><i class="fa fa-calendar"></i></span>';
    bodyvar+='<input id="start_date" type="text" class="form-control" disabled>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='<div class="col-lg-3">';
    bodyvar+='<div class="input-group bootstrap-timepicker"><div class="bootstrap-timepicker-widget dropdown-menu"><table><tbody><tr><td><a href="#" data-action="incrementHour"><i class="fa fa-angle-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="fa fa-angle-up"></i></a></td><td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="fa fa-angle-up"></i></a></td></tr><tr><td><input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"></td> <td class="separator">:</td><td><input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"></td> <td class="separator">&nbsp;</td><td><input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"></td></tr><tr><td><a href="#" data-action="decrementHour"><i class="fa fa-angle-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="fa fa-angle-down"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="fa fa-angle-down"></i></a></td></tr></tbody></table></div>';
    bodyvar+='<div class="input-group clockpicker" data-autoclose="true">';
    bodyvar+='<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>';
    bodyvar+='<input id="start_time" type="text" class="form-control clockpicker" disabled>';
    bodyvar+='</div></div>';
    bodyvar+='</div>';
    //bodyvar+='<div class="input-group clockpicker" data-autoclose="true"><input type="text" id="start_time" class="form-control" value="09:30" ><span class="input-group-addon"><span class="fa fa-clock-o"></span></span></div>';
    bodyvar+='<!--/div>';
    bodyvar+='</div-->';
    //
    //bodyvar+='<div class="row" style="margin-left: 15px">';
    bodyvar+='<div class="col-lg-3">';
    bodyvar+='<div class="input-group">';
    bodyvar+='<span class="input-group-addon"><i class="fa fa-calendar"></i></span>';
    bodyvar+='<input id="end_date" type="text" class="form-control" disabled>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='<div class="col-lg-3">';
    bodyvar+='<div class="input-group bootstrap-timepicker"><div class="bootstrap-timepicker-widget dropdown-menu"><table><tbody><tr><td><a href="#" data-action="incrementHour"><i class="fa fa-angle-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="fa fa-angle-up"></i></a></td><td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="fa fa-angle-up"></i></a></td></tr><tr><td><input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"></td> <td class="separator">:</td><td><input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"></td> <td class="separator">&nbsp;</td><td><input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"></td></tr><tr><td><a href="#" data-action="decrementHour"><i class="fa fa-angle-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="fa fa-angle-down"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="fa fa-angle-down"></i></a></td></tr></tbody></table></div>';
    bodyvar+='<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>';
    bodyvar+='<input id="end_time" type="text" class="form-control clockpicker" disabled>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='</div>';
    bodyvar+='</form>';
    bodyvar+='<!--div class="bs-callout bs-callout-info fade in" style="margin-right: 25px; margin-left: 25px; display: block" id="divnoti"><button type="button" class="close" id="closebtc" >×</button>';
    bodyvar+='<p>{{ langmod.ARDESCRIP2 }}</p></div-->';
    bodyvar+='</div>';
    var btnvar='<button class="btn btn-default btn-xs mr5 mb10" id="btn-cancelautof" style="" onclick="return btncancelemail()">{{ langmod.ARCANCEL }}</button><button type="button" class="btn btn-success btn-xs mr5 mb10" id="btnaddautof2" onclick="return btnaddautof()">{{ langmod.ARADD }}</button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(btnvar);
    $("#addmodal").modal('toggle');
});
$("#btn_add_domain_OLD").click(function (){
    alert();
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.DOMLABLE3 }}</span></button><h4 class="modal-title">{{ langmod.DBNTADD }}</h4>';
    var bodyvar='<div class="row"><div class="col-sm-5"><b>Domain:</b></div><div class="col-sm-7"><input type="text" class="form-control" style="padding:3px 0px;" id="newdomain" onkeyup="return newdomainkeyup()"></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-5" style="padding-top: 3px"><b>Path:</b> /home/{{ users }}/</div><div class="col-sm-7"><input type="text" class="form-control" style="padding:3px 0px;" id="pathdomain" value="public_html/"></div></div>';
    var btnvar='<button type="button"  class="btn btn-default btn-block mb10" onclick ="return canceladd()">{{ langmod.DCANDELDOMAIN }}</button></div><div class="col-sm-6"><button type="button" onclick="return btn_save_domain()" id="btn_save_domain" class="btn btn-primary btn-block mb10">{{ langmod.DBNTADD }}</button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(btnvar);
    $("#addmodal").modal('toggle');
});
$("#btn_add_subdomain").click(function (){
    var headervar='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.SUBDOMLABLE3 }}</span></button><h4 class="modal-title">{{ langmod.SDBNTADD }}</h4>';
    var bodyvar='<div class="row"><div class="col-sm-3"><b>{{ langmod.SDDOMAIN }}:</b></div><div class="col-sm-3"><input type="text" class="form-control" style="padding:3px 0px;" id="subdomain" onkeyup="return subdomainkeyup()"></div><div class="col-sm-5"><select id="domains" class="form-control" >{% for dsel in mod.seldomain %}<option value="{{ dsel.domain }}">{{ dsel.domain }}</option>{% endfor %}</select></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.SDPATH }}:</b> /home/{{ users }}</div><div class="col-sm-5"><input type="text" class="form-control" style="padding:3px 0px;" id="pathdomain" value="/public_html/"></div></div><div class="row" style="padding-top: 5px"><div class="col-sm-3" style="padding-top: 3px"><b>{{ langmod.SUBDOMLABEL8 }}:</b></div><div class="col-sm-5"><input type="checkbox" class="form-control2" style="padding:3px 0px;" id="autossl"></div></div><p class="text-center"  style="padding-top: 15px"><b>{{ langmod.SUBDOMLABEL7 }}</b></p>';
    var btnvar='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.SUBDOMLABLE3 }}</button> <button type="button" class="btn btn-primary" onclick="return btn_save_subdomain()" id="btnsavesubdomain">{{ langmod.SDBNTADD }}</div></button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(btnvar);
    $("#addmodal").modal('toggle');
});
$("#btn-lets-add").click(function (){
    $("#alert-confirm").hide('blind');
    $("#btn-lets-add").addClass('disabled');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    if($("#domain_lets").val()!=''){
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=letsencrypt&acc=add",
            data:"domain="+$("#domain_lets").val(),
            complete: function(datos){
                console.log(datos.responseText);
                if(datos.responseText=='Error_domain'){
                    $("#btn-lets-add").removeClass('disabled');
                    noti_bubble('{{langmod.SSLERRODNS}}','{{langmod.SSLVALIDATEERROR}}','error',false,false,'3000',true);

                    return false;
                }else if(datos.responseText=='Error'){
                    $("#btn-lets-add").removeClass('disabled');
                    noti_bubble('{{langmod.SSLERRORDO}}','{{langmod.SSLVALIDATEERROR}}','error',false,false,'3000',true);

                    return false;
                }else{
                    $("#sslbody").html(datos.responseText);
                    noti_bubble('{{langmod.SSLOK}}','{{langmod.SSLALEROK}}','success',false,false,'3000',true);

                    return false;
                }
            }
        });
    }else{
        var error1 ='<div class="alert alert-danger fade in"><strong>{{langmod.LMATENC}}</strong> {{langmod.LMALERT1}}</div>';
        $("#alert-confirm").html(error1);
        $("#alert-confirm").show('blind');
        $("#btn-lets-add").removeClass('disabled');
        return false;
    }

});
$("#forceallrenew").click(function () {
    $("#forceallrenew").attr('disabled', true);
    $("#forceallrenew").addClass('disabled');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=letsencrypt&acc=forceallrenew",
        complete: function(datos){
            updlistssl();
            $("#forceallrenew").attr('disabled', false);
            $("#forceallrenew").removeClass('disabled');
            return false;
        }
    });
});
$("#btn-usemysqluser").click(function (){
    btnporcess('off','btn-usemysqluser','{{ langmod.DBLABEL4 }}');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mysql_manager&acc=usemysqluser",
        data: "userdb="+$("#useusermyqlsel").val()+"&host="+$("#newhostuser").val()+"&dbase="+$("#dbasehiden").val(),
        complete: function(datos){
            if(datos.responseText=='OK'){
                $("#newuser").val('');
                $("#newpass1").val('');
                $("#newpass1").val('');
                $("#modal-newusermysql").modal('toggle');
                noti_bubble('{{langmod.DMUSSQLOK}}','{{langmod.DBSUCCT}}','success',false,false,'3000',true);
                refrestable();
                btnporcess('on','btn-usemysqluser','{{ langmod.DBBTNASIGN }}');
            }else if(datos.responseText=='1'){
                noti_bubble('{{langmod.DBERROR}}','{{langmod.DBERROR1}}','error',false,false,'3000',true);
                btnporcess('on','btn-usemysqluser','{{ langmod.DBBTNASIGN }}');
            }else if(datos.responseText==2){
                noti_bubble('{{langmod.DBERROR}}','{{langmod.DBERROR2}}','error',false,false,'3000',true);
                btnporcess('on','btn-usemysqluser','{{ langmod.DBBTNASIGN }}');
            }
            return false;
        }
    });
    return false;
});
$("#btn-newdbonly").click(function (){
    if($("#newdb").val()!=''){
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        btnporcess('off','btn-newdbonly','{{ langmod.DBLABEL4 }}');
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=mysql_manager&acc=newmysqlonly",
            //data: "datebase="+$("#newdb").val()+"&collation="+$("#collationonly").val()+"&charset="+$("#charsetonly").val(),
            data: "datebase="+$("#newdb").val()+"&charset="+$("#charsetonly").val(),
            complete: function(datos){
                if(datos.responseText=='OK'){
                    $("#modal-onlymysql").modal('hide');
                    refrestable();
                    refrespanelnew('mysql_manager');
                    noti_bubble('{{langmod.DBSUCCT}}','{{langmod.DMMYSQLOK}}','success',false,false,'3000',true);
                    btnporcess('on','btn-newdbonly','{{ langmod.DBCREATEMODAL }}');
                }else if(datos.responseText=='1'){
                    noti_bubble('{{langmod.DBERROR1}}','{{langmod.DMMYSQLOK}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newdbonly','{{ langmod.DBCREATEMODAL }}');
                }else if(datos.responseText=='2'){
                    noti_bubble('{{langmod.DBERROR2}}','{{langmod.DMMYSQLOK}}','error',false,false,'3000',true);
                    btnporcess('on','btn-newdbonly','{{ langmod.DBCREATEMODAL }}');
                }
                return false;
            }
        });
    }else{
        noti_bubble('{{langmod.DBERRORBD}}','{{langmod.DMMYSQLOK}}','error',false,false,'3000',true);
        btnporcess('on','btn-newdbonly','{{ langmod.DBCREATEMODAL }}');
        return false;
    }
});
$("#btn-updsettings").click(function (){
    if($("#GOOGLEFA").prop('checked')){ var googlefa =1;}else{var googlefa =0;}
    $("#btn-updsettings").attr('disabled',true);
    $("#btn-updsettings").addClass('disabled');
    $("#btn-updsettings").html('<i class="fa fa-spinner fa-spin"></i> {{langene.GNBTN3}}');
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });

    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?acc=change_settings",
        data: "sessiontime="+$("#sessiontime").val()+"&listrow="+$("#listrow").val()+"&soundalert="+$("#soundalert").val()+"&googlefa="+googlefa,
        complete: function(datos){
            noti_bubble('{{langene.NSACCSUCCESS}}','{{langene.GNLABEL20}}','success',false,false,'3000',true);
            $("#btn-updsettings").attr('disabled',false);
            $("#btn-updsettings").removeClass('disabled');
            $("#btn-updsettings").html('{{langene.GNBTN3}}');
            return false;
        }
    });
});
$("#btn-savequotaemail").click(function () {
    if($("#quotaemailmodal").val()==''){
        noti_bubble('{{langmod.EMERROR}}','{{langmod.EMERROR2}}','error',false,true,'3000',true);

        return false;
    }else{
        $("#btn-savequotaemail").attr('disabled',true);
        $("#btn-savequotaemail").addClass('disabled');
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=updquotaemail",
            data: "email=" + $("#quotaemailtitle").html() + "&quota=" + (($("#quotaemailmodal").val()*1024)*1024),
            complete: function (datos) {
                $("#modal-updquotemail").modal('hide');
                updatelistemail();
                noti_bubble('{{langmod.EMSUCCT}}','{{langmod.EMUPDOK}}','success',false,false,'3000',true);

                //$("#bar_cp_mysql_manager").empty().removeData().attr('data-percent', porc).circliful( { backgroundColor: '#eeeeee', foregroundColor: bgcolorcirc });
                $("#btn-savequotaemail").attr('disabled',false);
                $("#btn-savequotaemail").removeClass('disabled');
                return false;
            }
        })
    }

});
$("#btn-changpassemail").click(function (){
    btnporcess('off','btn-changpassemail','{{ langmod.EMLABEL9 }}');
    if(($("#pass1email").val()=='') && ($("#pass1email").val()=='')) {
        noti_bubble('{{langmod.EMERROR}}','{{langmod.EFEILDR}}','error',false,true,'3000',true);
        btnporcess('on','btn-changpassemail','{{ langmod.EBTCSAVE }}');
        return false;
    }else if( $("#pass1email").val() != $("#pass2email").val()){
        noti_bubble('{{langmod.EMERROR}}','{{langmod.EERROR1}}','error',false,true,'3000',true);
        btnporcess('on','btn-changpassemail','{{ langmod.EBTCSAVE }}');
        return false;
    }else{
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=changpassemail",
            data: "email="+$("#emailpass").val()+"&pass1email="+$("#pass1email").val(),
            complete: function(datos){
                if(datos.responseText==0){
                    $("#modal-changepassemail").modal('hide');
                    noti_bubble('{{langmod.EMSUCCT}}','{{langmod.EMCHANGEPASSOK}}','success',false,false,'3000',true);
                    btnporcess('on','btn-changpassemail','{{ langmod.EBTCSAVE }}');
                }else{
                    if(datos.responseText==7){var msj='{{langmod.ERROR7}}'}
                    if(datos.responseText==8){var msj='{{langmod.ERROR8}}'}
                    noti_bubble('{{langmod.EMERROR}}',+msj,'success',false,false,'3000',true);
                    btnporcess('on','btn-changpassemail','{{ langmod.EBTCSAVE }}');
                    return false;
                }
            }
        });
        return false;
    }
});
$("#addemailbtn").click(function (){
    var headermod = '<h4>{{ langmod.EBNTADD }}</h4>';
    var bodymod = '<div class="row"><div class="col-lg-2">{{langmod.EEMAILH}}</div><div class="col-lg-2"><input id="emailaddres" class="form-control" value="" placeholder=""></div><div class="col-lg-1">@</div><div class="col-lg-3">';
    bodymod += '<select id="domain" class="form-control"><option value="">{{ langmod.ECHOOSE }}</option>';
    bodymod += '{% for email2 in mod.email2 %}';
    bodymod += '<option value="{{ email2.domain }}">@{{ email2.domain }}</option>';
    bodymod += '{% endfor %}';
    bodymod += '</select></div><div class="col-sm-3">';
    bodymod += '<input id="quotamail" class="form-control" value="0" placeholder=""><label style="margin-left: 10px; margin-top: 7px">{{ langmod.EMLABEL8 }}</label>';
    bodymod += '</div></div><div class="row" style="margin-top:15px"><div class="col-lg-2">{{langmod.EPASSW}}</div><div class="col-lg-2"><input id="pass" class="form-control" value="{{mod.rand}}" placeholder="{{langmod.EPASSW}}"></div>';
    bodymod += '<div class="col-sm-4">{{ langmod.EELABELRANDON }}   <a href="#"  onclick="return changerrandom(\'pass\')" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{ langmod.ICONRANDOM }}"><i class="fa fa-cog"></i></a><div class="btn-group dropdown mb10 mr10">';
    bodymod += '<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">{{ langmod.FTPENCRYTED }}<span class="caret"></span></button>';
    bodymod += '<ul class="dropdown-menu right animated fadeIn" role="menu" style="margin-left: -48.5px;">';
    bodymod += '<li><select class="form-control" id="lengthpass" title="{{ langmod.FTPLENGTH }}"><option value="7" selected> {{ langmod.FTPLENGTH }}  7</option><option value="8"> {{ langmod.FTPLENGTH }}  8</option>';
    bodymod += '<option value="9"> {{ langmod.FTPLENGTH }}  9</option><option value="10"> {{ langmod.FTPLENGTH }} 10</option><option value="11"> {{ langmod.FTPLENGTH }} 11</option>';
    bodymod += '<option value="12"> {{ langmod.FTPLENGTH }} 12</option><option value="13"> {{ langmod.FTPLENGTH }} 13</option><option value="14"> {{ langmod.FTPLENGTH }} 14</option><option value="15"> {{ langmod.FTPLENGTH }} 15</option>';
    bodymod += '</select></li><li><select class="form-control"  id="typepass" title="{{ langmod.FTPTYPE }}" style="margin-top: 5px">';
    bodymod += '<option value="1">{{ langmod.FTPTYPE }} {{ langmod.FTPALF }}</option>';
    bodymod += '<option value="2" selected>{{ langmod.FTPTYPE }} {{ langmod.FTPALFNUM }}</option>';
    bodymod += '<option value="3">{{ langmod.FTPTYPE }} {{ langmod.FTPALFNUMSIG }}</option>';
    bodymod += '</select></li></ul></div></div>';
    var footermod = '<button class="btn btn-default btn-xs mr5 mb10"  id="btn-cancelemail"  onclick="return btncancelemail()">{{langmod.ECANDELDOMAIN}}</button>   <button class="btn btn-primary btn-xs mr5 mb10" id="btnaddemail" onclick="return btnaddemail()">{{langmod.EADD}}</button> ';
    $("#addmodal .modal-header").html(headermod);
    $("#addmodal .modal-body").html(bodymod);
    $("#addmodal .modal-footer").html(footermod);
    $("#addmodal").modal('toggle');

});
$("#btn-updatemodal").click(function (){
    $("#alertdivforw").hide('blind');
    if($("#forwardersupd").val()==''){
        var msj='{{langmod.EFORWDI}}';
        $("#alertdivforw").html('<div class="alert alert-danger fade in"><i class="glyphicon glyphicon-ban-circle alert-icon "></i> '+msj+'</div>');
        $("#alertdivforw").show('blind');
        return false;
    }else{
        btnporcess('off','btn-updatemodal','{{ langmod.EMLABEL9 }}');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=email_accounts&acc=updateforwarders",
            data: "email="+$("#hiddenemail").val()+"&goto="+$("#forwardersupd").val(),
            complete: function(datos){
                if(datos.responseText==0){
                    $("#tdfw"+$("#idtrfw").val()).html($("#forwardersupd").val());
                    btnporcess('on','btn-updatemodal','{{ langmod.EBTNEDITMODAL }}');
                    $("#editforwarddomain").modal('hide');
                    noti_bubble('{{langmod.EMUPDOKFORW}}','{{langmod.EMSUCCT}}','success',false,false,'3000',true);
                }else{
                    btnporcess('on','btn-updatemodal','{{ langmod.EBTNEDITMODAL }}');
                    noti_bubble('{{langmod.EERROR6}}','{{langmod.EMERROR}}','error',false,false,'3000',true);
                    return false;
                }
            }
        });
    }
});
$("#btn-updautof").click(function (){
    var sujbj=$("#modsubjectautof").val();
    var msj=$("#modmessajeautof").val();
    var str=$("#modemailautof").val();
    var res= str.split("||");
    var email=res[0];
    var pos=res[1];
    if($("#sendonlydate-edit").val()==1){
        if(($("#start_date-edit").val()=='')||($("#start_time-edit").val()=='')||($("#end_date-edit").val()=='')||($("#end_time-edit").val()=='')){
            noti_bubble('{{langmod.ARERRO1}}','{{langmod.ARERROR}}','error',false,false,'3000',true);
            return false;
        }
    }
    if($("#sendonlydate-edit").attr('checked')){
        var sendonlydate=1;
        var start_dateedit=$("#start_date-edit").val();
        var start_timeedit=$("#start_time-edit").val();
        var end_dateedit=$("#end_date-edit").val();
        var end_timeedit=$("#end_time-edit").val();
    }else{
        var sendonlydate=0;
        var start_dateedit='';
        var start_timeedit='';
        var end_dateedit='';
        var end_timeedit='';
    }
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    btnporcess('off','btn-updautof','{{ langmod.AULABEL5 }}');
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=mail_autoreply&acc=updautof",
        data:"email="+email+"&sujbj="+sujbj+"&msj="+msj+"&sendonlydate="+sendonlydate+"&start_date="+start_dateedit+"&start_time="+start_timeedit+"&end_date="+end_dateedit+"&end_time="+end_timeedit,
        complete: function(datos){
            //alert(datos.responseText);
            if(datos.responseText==0){
                $("#sj"+pos).html(sujbj);
                btnporcess('on','btn-updautof','{{ langmod.ARUPDATE }}');
                $("#editmodal").modal('hide');
                listautof();
            }else{
                noti_bubble('{{langmod.ARERROR6}}','{{langmod.ARERROR}}','error',false,false,'3000',true);
                btnporcess('on','btn-updautof','{{ langmod.ARUPDATE }}');
                return false;
            }
            return false;
        }
    });
    return false;
});
$("#typyrecords").change(function(){
    if($("#typyrecords").val()==''){
        $("#aipv4").hide('blind');
        $("#mx").hide('blind');
        $("#txt").hide('blind');
        $("#srvr").hide();
    }
    if($("#typyrecords").val()=='A'){
        $("#cachereg").attr('disabled', false);
        $("#mx").hide();
        $("#txt").hide();
        $("#srvr").hide();
        $("#aipv4").show('blind');
        $("#ttitletype").html('{{langmod.DNSBTNADDRA}}');
        $("#namebox3").html('{{langmod.DNSDIRECT}} {{langmod.DNSIP4}}');
        $("#addregdns").html('{{langmod.DNSBTNADDRA}}');
        $("#aipv4").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
    if($("#typyrecords").val()=='AAAA'){
        $("#cachereg").attr('disabled', false);
        $("#mx").hide();
        $("#txt").hide();
        $("#srvr").hide();
        $("#aipv4").show('blind');
        $("#ttitletype").html('{{langmod.DNSBTNADDR4A}}');
        $("#namebox3").html('{{langmod.DNSDIRECT}} {{langmod.DNSIP6}}');
        $("#addregdns").html('{{langmod.DNSBTNADDR4A}}');
        $("#aipv4").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
    if($("#typyrecords").val()=='CNAME'){
        $("#cachereg").attr('disabled', true);
        $("#mx").hide();
        $("#txt").hide();
        $("#srvr").hide();
        $("#aipv4").show('blind');
        $("#ttitletype").html('{{langmod.DNSBTNADDCN}}');
        $("#namebox3").html('{{langmod.DNSTITCNAME}}');
        $("#addregdns").html('{{langmod.DNSBTNADDCN}}');
        $("#aipv4").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
    if($("#typyrecords").val()=='MX'){
        $("#aipv4").hide();
        $("#txt").hide();
        $("#srvr").hide();
        $("#mx").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
    if($("#typyrecords").val()=='TXT'){
        $("#aipv4").hide();
        $("#mx").hide();
        $("#srvr").hide();
        $("#txt").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
    if($("#typyrecords").val()=='SRV'){
        $("#aipv4").hide();
        $("#mx").hide();
        $("#txt").hide();
        $("#srvr").show('blind');
        $("#typeregihide").val($("#typyrecords").val());
    }
});
$("#btn-dnscanceltxt").click(function () {
    $("#txt").toggle('blind');
    return false;
});
$("#btn-dnscancelmx").click(function () {
    $("#mx").toggle('blind');
    return false;
});
$("#btn-addons-efm-add").click(function (){
    if(($("#pass1fm").val()!='')&&($("#pass2fm").val()!='')) {
        if ($("#pass1fm").val() != $("#pass2fm").val()) {
            noti_bubble('{{langmod.ADDERROR1}}','{{langmod.ADDERROR2}}','error',false,false,'3000',true);
            return false;
        } else {
            $("#row1").hide();
            $("#row2").hide();
            $("#btnoff").hide();
            $("#install").show();
            $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
            $.ajax({
                type: "POST",
                url: "./{{users}}/index.php?module=addons&acc=filemanager&op=install",
                data:"pass="+$("#pass1fm").val(),
                complete: function(datos){
                    window.location.href="/{{users}}/?module=addons&acc=filemanager";
                    return false;
                }
            });
            return false;
        }
    }else{
        noti_bubble('{{langmod.ADDERROR2}}','{{langmod.FERROR}}','error',false,false,'3000',true);
    }
});
$("#addphpiniadv").click(function(){
    $("#addphpiniadv").html('<i class="fa fa-spinner  fa-spin"></i>&nbsp;{{ langmod.PHPLABEL9 }}');
    var file = $("#code1hiden").val();
    var hfilename = $("#hfilename").val();
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        type: "POST",
        url: "./{{users}}/index.php?module=phpini_editor&acc=addlabelphpiniadv",
        data:"file="+Base64.encode(file)+"&hfilename="+hfilename,
        complete: function(datos){
            listregphpini();
            $("#addphpiniadv").html('<i class="fa fa-check"></i>&nbsp;{{ langmod.UPDATEREG }}');
            return false;
        }
    });
});
$("#btn-generatenow").click(function (){
    $("#notemailb").hide('blind');
    $("#btn-genenow").hide();
    $("#textbackok").show();
    $("#btn-fullbackup").addClass('disabled');
    var email=$("#notiemail").val();
    var typefile='all';
    btnporcess('off','btn-generatenow','{{ langmod.BCLABEL4 }}');
    ajaxcreatebackup(email,typefile,'btn-fullbackup');
    btnporcess('on','btn-generatenow','{{ langmod.BCLABEL1 }}');
    return false;
});
$("#tab1link").click(function (){
    $("#tab2link").removeClass('active');
    $("#tab2link").removeClass('show');
    $("#tab1link").addClass('active');
    $("#tab1link").addClass('show');
    $("#tab-2").hide();
    $("#tab-1").show();
});
$("#tab2link").click(function (){
    $("#tab1link").removeClass('active');
    $("#tab1link").removeClass('show');
    $("#tab2link").addClass('active');
    $("#tab2link").addClass('show');
    $("#tab-1").hide();
    $("#tab-2").show();
});
$("#restor_file").change(function() {
    $("#btn_rest_file").hide();
    var file = this.files[0];
    var imagefile = file.type;
    var match="application/gzip";
    if(imagefile!=match){
        noti_bubble('{{langmod.BCALERt1}}','','error',false,false,'3000',true);
        return false;
    }else{
        $("#btn_rest_file ").show();
        return false;
    }
});
$("#restore_sql").change(function (){
    $("#btn_rest_sql").hide();
    var file = this.files[0];
    var imagefile = file.type;
    var match="application/sql";
    if(imagefile!=match){
        noti_bubble('{{langmod.BCALERt1}}','','error',false,false,'3000',true);
        return false;
    }else{
        $("#btn_rest_sql ").show();
        return false;
    }
});
$("#btn_rest_file").on('submit',(function(e) {
    e.preventDefault();
    $("#message").empty();
    $('#loading').show();
    $.ajax({
        url: "ajax_php_file.php", // Url to which the request is send
        type: "POST",             // Type of request to be send, called as method
        data: new FormData(this), // Data sent to server, a set of key/value pairs (i.e. form fields and values)
        contentType: false,       // The content type used when sending data to the server.
        cache: false,             // To unable request pages to be cached
        processData:false,        // To send DOMDocument or non processed data file it is set to false
        success: function(data)   // A function to be called if request succeeds
        {
            $('#loading').hide();
            $("#message").html(data);
        }
    });
}));
$('#btn_rest_sql').click(function () {
    noti_bubble('{{langmod.BCLOADING}}','','warning',false,false,'3000',true);
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    $.ajax({
        url: "./{{users}}/index.php?module=backups&acc=restore_sql",
        type: "POST",
        data: new FormData(uploadsql),
        contentType: false,
        cache: false,
        processData:false,
        success: function(data){
            //$("#message2").html('<b>{{langmod.BCBACKUPOK}}</b>');
            noti_bubble('{{langmod.BCBACKUPOK}}','','success',false,false,'3000',true);
            return false;
        }
    });
    return false;
});
$('#btn_rest_file').click(function () {
    noti_bubble('{{langmod.BCLOADING}}','','warning',false,false,'3000',true);
    $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
    var uploadtargz =$("#restor_file");
    $.ajax({
        url: "./{{users}}/index.php?module=backups&acc=restore_file",
        type: "POST",
        data: new FormData(uploadtargz),
        contentType: false,
        cache: false,
        processData:false,
        success: function(datos){
            if(datos.responseText==0){
                noti_bubble('{{langmod.BCBACKUPOK}}','','success',false,false,'3000',true);
            }else{
                var errormsj=datos.responseText;
                noti_bubble('{{langmod.BCBACKUPOK}}',errormsj,'error',false,false,'3000',true);
            }
            return false;
        }
    });
    return false;
});
$("#modal-btn-createbdanduser").click(function(){
    $("#modal-createbdanduser").modal('toggle');
    return false;
});
$(".mysql_processes").click(function (){
    processlistmysql(1);
    $("#mysqlprocesslist").modal('toggle');
});
$("#btn-delete-filemanager").click(function (){
    var btsfooter='<button type="button" class="btn btn-white" data-dismiss="modal">{{ langmod.TNOT }}</button><button type="button" class="btn btn-primary" onclick="return alertdeletefilemanager(1)">{{ langmod.TYES }}</button>';
    var btsheader='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only"></span></button><h4 class="modal-title"></h4><small class="font-bold"></small>';
    $("#deletemodal .modal-footer").html(btsfooter);
    $("#deletemodal .modal-header").html(btsheader);
    $("#deletemodal .modal-body").html('<p class="text-center"><strong>{{ langmod.DESINTALL }}</strong></p>');
    $("#deletemodal").modal('toggle');
});
$("#modal-btn-onlypg").click(function (){
    var headervar ='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">{{ langmod.PGCLOSE }}</span></button><h4 class="modal-title" id="mySmallModalLabel">{{ langmod.PGCREATEDB }} ({{ users }})</h4>';
    var bodyvar ='<div class="row"><label class="col-lg-4  control-label" for="">{{ langmod.PGLABELDB }}:</label><div class="col-lg-4"><input type="text" class="form-control" id="newdbpg" maxlength="7" placeholder=""></div></div>';
    var footervar ='<button type="button" class="btn btn-default" data-dismiss="modal">{{ langmod.PGCLOSE }}</button> <button type="button" class="btn btn-primary" id="btn-newdbonlypg" onclick="return btnnewdbonlypg()">{{ langmod.PGCREATEMODAL }}</button>';
    $("#addmodal .modal-header").html(headervar);
    $("#addmodal .modal-body").html(bodyvar);
    $("#addmodal .modal-footer").html(footervar);
    $("#addmodal").modal('toggle');
});
$("#dbtab1").click(function (){
    $("#litab1").addClass('active');
    $("#tab-1").addClass('active');
    $("#tab-1").addClass('show');
    $("#litab2").removeClass('active');
    $("#tab-2").removeClass('active');
    $("#tab-2").removeClass('show');
    $("#dbtab2").removeClass('show');
    $("#dbtab2").removeClass('active');
    $("#dbtab1").addClass('show');
    $("#dbtab1").addClass('active');
    $("#tab-2").hide();
    $("#tab-1").show();
});
$("#dbtab2").click(function (){
    $("#litab1").removeClass('active');
    $("#tab-1").removeClass('active');
    $("#tab-1").removeClass('show');
    $("#litab2").addClass('active');
    $("#tab-2").addClass('active');
    $("#tab-2").addClass('show');
    $("#dbtab1").removeClass('show');
    $("#dbtab1").removeClass('active');
    $("#dbtab2").addClass('show');
    $("#dbtab2").addClass('active');
    $("#tab-1").hide();
    $("#tab-2").show();
});
$("#generate_dp").click(function (){
    if(($("#dpdomain").val()=='')||($("#dpbd").val()=='')||($("#dpuserdb").val()=='')||($("#dppassbd").val()=='')||($("#dpadminuser").val()=='')||($("#pdadminemail").val()=='')||($("#pdadminpass").val()=='')){
        noti_bubble('{{langmod.ADDALLREQ}}','','error',false,false,'3000',true);
        return false;
    }else{
        $("#generate_dp").addClass('disabled');
        $("#generate_dp").attr('disabled',true);
        $("#modaladdwp .modal-header").html('<h4>{{ langmod.ADDDDP36 }}</h4>');
        $("#modaladdwp .modal-body").html('<div class="text-center"><i class="fa fa-hourglass-start"></i>  {{ langmod.ADDDDP37 }}</div>');

        $("#modaladdwp").modal('toggle');
        $.ajaxSetup({ headers: { 'csrftoken' : 'ff1ee1e9dea6a0ec617d828f8e2bdc28' } });
        $.ajax({
            type: "POST",
            url: "./{{ users }}/index.php?module=addons&acc=drupal&op=add",
            data:"dpdomain="+$("#dpdomain").val()+"&dppach="+$("#dppach").val()+"&dpbd="+$("#dpbd").val()+"&dpuserdb="+$("#dpuserdb").val()+"&dppassbd="+$("#dppassbd").val()+"&dpadminuser="+$("#dpadminuser").val()+"&pdadminemail="+$("#pdadminemail").val()+"&pdadminpass="+Base64.encode($("#pdadminpass").val()),
            complete: function(datos){
                $("#modaladdwp").modal('toggle');
                $("#generate_dp").removeClass('disabled');
                $("#generate_dp").attr('disabled',false);
                $("#pdadminemail").val('');
                $("#pdadminpass").val('');
                $("#dpbd").val('');
                $("#dpuserdb").val('');
                $("#dppassbd").val('');
                $("#trpaneldp").html(datos.responseText);
                return false;
            }
        });
        return false;
    }
    //}
});
$("#generate_jl").click(function (){
    if(($("#jldomain").val()=='')||($("#jlbd").val()=='')||($("#jluserdb").val()=='')||($("#jlpassbd").val()=='')){
        noti_bubble('{{langmod.ADDALLREQ}}','','error',false,false,'3000',true);
        return false;
    }else{
        $("#generate_jl").addClass('disabled');
        $("#generate_jl").attr('disabled',true);
        $("#modaladdwp .modal-header").html('<h4>{{ langmod.ADDDDP38 }}</h4>');
        $("#modaladdwp .modal-body").html('<div class="text-center"><i class="fa fa-hourglass-start"></i>  {{ langmod.ADDDDP37 }}</div>');
        $("#modaladdwp").modal('toggle');
        $.ajaxSetup({ headers: { 'csrftoken' : 'ff1ee1e9dea6a0ec617d828f8e2bdc28' } });
        $.ajax({
            type: "POST",
            url: "./{{ users }}/index.php?module=addons&acc=joomla&op=add",
            data:"jldomain="+$("#jldomain").val()+"&jlpach="+$("#jlpach").val()+"&jlbd="+$("#jlbd").val()+"&jluserdb="+$("#jluserdb").val()+"&jlpassbd="+Base64.encode($("#jlpassbd").val()),
            complete: function(datos){
                $("#modaladdwp").modal('toggle');
                $("#generate_jl").removeClass('disabled');
                $("#generate_jl").removeClass('disabled');
                $("#generate_jl").attr('disabled',false);
                $("#jlpach").val('');
                $("#jlbd").val('');
                $("#jlpassbd").val('');
                $("#trpaneljl").html(datos.responseText);
                return false;
            }
        });
        return false;
    }
});
$("#generate_ps").click(function (){
    if(($("#psurl").val()=='')||($("#psdomain").val()=='')||($("#pslang").val()=='')||($("#psbd").val()=='')||($("#psuserdb").val()=='')||($("#pspassbd").val()=='')){
        noti_bubble('{{langmod.ADDALLREQ}}','','error',false,false,'3000',true);
        return false;
    }else{
        $("#generate_ps").addClass('disabled');
        $("#generate_ps").attr('disabled',true);
        $("#modaladdwp .modal-header").html('<h4>{{ langmod.ADDDDP39 }}</h4>');
        $("#modaladdwp .modal-body").html('<div class="text-center"><i class="fa fa-hourglass-start"></i>  {{ langmod.ADDDDP37 }}</div>');

        $("#modaladdwp").modal('toggle');
        $.ajaxSetup({ headers: { 'csrftoken' : 'ff1ee1e9dea6a0ec617d828f8e2bdc28' } });
        $.ajax({
            type: "POST",
            url: "./{{ users }}/index.php?module=addons&acc=prestashop&op=add",
            data:"psurl="+$("#psurl").val()+"&psdomain="+$("#psdomain").val()+"&pspach="+$("#pspach").val()+"&pslang="+$("#pslang").val()+"&psbd="+$("#psbd").val()+"&psuserdb="+$("#psuserdb").val()+"&pspassbd="+Base64.encode($("#pspassbd").val())+"&version="+$("#psversion").val()+"&psadminemail="+$("#psadminemail").val()+"&psadminpass="+$("#psadminpass").val(),
            complete: function(datos){
                $("#modaladdwp").modal('toggle');
                $("#generate_ps").removeClass('disabled');
                $("#generate_ps").attr('disabled',false);
                $("#psadminemail").val('');
                $("#psadminpass").val('');
                $("#psbd").val('');
                $("#psuserdb").val('');
                $("#pspassbd").val('');
                $("#trpanelps").html(datos.responseText);
                return false;
            }
        });
        return false;
    }
});
$("#generate_wp").click(function (){
    if(($("#wpurl").val()=='')||($("#wpdomain").val()=='')||($("#wplang").val()=='')||($("#wpbd").val()=='')||($("#wpuserdb").val()=='')||($("#wppassbd").val()=='')){
        noti_bubble('{{langmod.ADDALLREQ}}','{{langmod.ADDSNAP}}','error',false,false,'3000',true);
        return false;
    }else{
        $("#generate_wp").addClass('disabled');
        $("#generate_wp").attr('disabled',true);
        $("#modaladdwp .modal-header").html('<h4>{{ langmod.ADDDDP40 }}</h4>');
        $("#modaladdwp .modal-body").html('<div class="text-center"><i class="fa fa-hourglass-start"></i>  {{ langmod.ADDDDP37 }}</div>');
        $("#modaladdwp").modal('toggle');
        $.ajaxSetup({ headers: { 'csrftoken' : '{{ tokenajax }}' } });
        $.ajax({
            type: "POST",
            url: "./{{users}}/index.php?module=addons&acc=wordpress&op=add",
            data:"wpurl="+$("#wpurl").val()+"&wpdomain="+$("#wpdomain").val()+"&wppach="+$("#wppach").val()+"&wplang="+$("#wplang").val()+"&wpbd="+$("#wpbd").val()+"&wpuserdb="+$("#wpuserdb").val()+"&wppassbd="+Base64.encode($("#wppassbd").val()),
            complete: function(datos){
                $("#modaladdwp").hide();
                $("#generate_wp").removeClass('disabled');
                $("#wpbd").val('');
                $("#wpuserdb").html('');
                $("#wppassbd").html('');
                $("#wppach").html('');
                $("#trpanelwp").html(datos.responseText);
                $("#modaladdwp").modal('toggle');
                return false;
            }
        });
        return false;
    }
});
var Base64 = {

    // private property
    _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

    // public method for encoding
    encode : function (input) {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;

        input = Base64._utf8_encode(input);

        while (i < input.length) {

            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }

            output = output +
                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

        }

        return output;
    },

    // public method for decoding
    decode : function (input) {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;

        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

        while (i < input.length) {

            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));

            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;

            output = output + String.fromCharCode(chr1);

            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }

        }

        output = Base64._utf8_decode(output);

        return output;

    },

    // private method for UTF-8 encoding
    _utf8_encode : function (string) {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    },

    // private method for UTF-8 decoding
    _utf8_decode : function (utftext) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while ( i < utftext.length ) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i+1);
                c3 = utftext.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;
    }

}